{"version":3,"sources":["observatory/trace.cljc"],"mappings":"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","names":["var_args","args__5732__auto__","len__5726__auto__","i__5727__auto__","argseq__5733__auto__","cljs.core/IndexedSeq","observatory.trace/make-trace","p__12618","map__12619","cljs.core/--destructure-map","cljs.core.get","seq12617","self__5712__auto__","cljs.core/seq","target-pid","cpu-topology","js/Date","observatory.trace/add-event","trace","event","cljs.core.update","cljs.core/conj","cljs.core.update_in","cljs.core/inc","cljs.core/max","observatory.trace/add-events","events","cljs.core.reduce","observatory.trace/by-type","seq12620","types","type-set","cljs.core/set","cljs.core/contains?","observatory.trace/by-pid","pid","cljs.core._EQ_","observatory.trace/by-tid","tid","observatory.trace/by-time-range","start-ns","end-ns","ts","observatory.trace/by-address-range","start-addr","end-addr","temp__5804__auto__","addr","observatory.trace/by-level","level","observatory.trace/query","seq12621","G__12622","cljs.core/first","cljs.core/next","self__5711__auto__","predicates","pred","cljs.core.apply","cljs.core/every-pred","cljs.core.filter","observatory.trace/query-first","seq12623","G__12624","observatory.trace/query-count","seq12625","G__12626","cljs.core/count","observatory.trace/group-by-type","cljs.core/group-by","observatory.trace/group-by-pid","observatory.trace/group-by-address","p__12630","map__12631","seq12628","G__12629","line-size","mask","p1__12627#","or__5002__auto__","observatory.trace/histogram","field","cljs.core.map","cljs.core/some?","cljs.core/frequencies","cljs.core.sort_by","cljs.core/val","cljs.core/>","observatory.trace/timeline-buckets","bucket-ns","p1__12632#","cljs.core/quot","cljs.core/key","p__12633","vec__12634","cljs.core.nth","bucket","evts","observatory.trace/cache-hit-rate","cache-events","p1__12637#","G__12640","fexpr__12639","hits","p1__12638#","total","observatory.trace/cache-hit-rate-by-level","p__12641","vec__12642","cljs.core.into","observatory.trace/hot-addresses","p__12648","map__12649","seq12646","G__12647","top-n","cljs.core.keep","p1__12645#","cljs.core.take","observatory.trace/page-fault-summary","faults","p1__12650#","G__12654","fexpr__12653","hard","p1__12651#","soft","p1__12652#","observatory.trace/io-summary","io-events","p1__12655#","G__12659","fexpr__12658","reads","p1__12656#","writes","p1__12657#","cljs.core/+","observatory.trace/events-per-second","ns-per-sec","buckets","cljs.core.mapv","p__12660","map__12661","count","observatory.trace/rolling-hit-rate","window-size","p1__12662#","G__12665","fexpr__12664","cljs.core.partition","window","p1__12663#","cljs.core/last","observatory.trace/correlate-miss-to-fault","p__12668","map__12669","seq12666","G__12667","window-ns","sorted","iter__5480__auto__","s__12671","cljs.core/LazySeq","cljs.core/chunked-seq?","c__5478__auto__","size__5479__auto__","b__12673","cljs.core/chunk-buffer","i__12672","vec__12674","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__12670","cljs.core/chunk-rest","vec__12677","cljs.core/cons","cljs.core/rest","miss","fault","observatory.trace/correlate-io-to-fault","p__12682","map__12683","seq12680","G__12681","s__12685","b__12687","i__12686","vec__12688","iter__12684","vec__12691","io","observatory.trace/trace->edn","cljs.core.pr_str","observatory.trace/edn->trace","edn-str","cljs.reader.read_string","observatory.trace/format-hex","n","observatory.trace/events->csv","headers","rows","s__12696","b__12698","i__12697","iter__12695","e","cljs.core/name","a","G__12699","G__12700","clojure.string.join","p1__12694#","cljs.core/chunk-first"],"sourcesContent":["(ns observatory.trace\n  \"Trace processing - pure functions for analyzing system traces.\n\n   Traces can come from:\n   - ETW (Windows Event Tracing)\n   - perf (Linux)\n   - DTrace (macOS/Solaris)\n   - Simulation\n   - Mock data for testing\n\n   This namespace is source-agnostic - just works with data.\"\n  (:require [observatory.schema :as schema]\n            [clojure.string :as str]\n            #?(:cljs [cljs.reader])))\n\n;; =============================================================================\n;; Trace Construction\n;; =============================================================================\n\n(defn make-trace\n  \"Create a new empty trace with metadata\"\n  [& {:keys [target-pid cpu-topology]\n      :or {target-pid nil}}]\n  {:metadata {:start-time #?(:clj (str (java.time.Instant/now))\n                             :cljs (str (js/Date.)))\n              :duration-ns 0\n              :event-count 0\n              :target-pid target-pid\n              :cpu-topology cpu-topology\n              :ram-topology nil\n              :disks []}\n   :events []})\n\n(defn add-event\n  \"Add an event to a trace. Returns new trace.\"\n  [trace event]\n  (-> trace\n      (update :events conj event)\n      (update-in [:metadata :event-count] inc)\n      (update-in [:metadata :duration-ns]\n                 max (:timestamp event))))\n\n(defn add-events\n  \"Add multiple events to a trace\"\n  [trace events]\n  (reduce add-event trace events))\n\n;; =============================================================================\n;; Filtering (Pure Predicates)\n;; =============================================================================\n\n(defn by-type\n  \"Predicate: filter by event type(s)\"\n  [& types]\n  (let [type-set (set types)]\n    (fn [event]\n      (contains? type-set (:type event)))))\n\n(defn by-pid\n  \"Predicate: filter by process ID\"\n  [pid]\n  (fn [event]\n    (= pid (:pid event))))\n\n(defn by-tid\n  \"Predicate: filter by thread ID\"\n  [tid]\n  (fn [event]\n    (= tid (:tid event))))\n\n(defn by-time-range\n  \"Predicate: filter by timestamp range [start, end)\"\n  [start-ns end-ns]\n  (fn [event]\n    (let [ts (:timestamp event)]\n      (and (>= ts start-ns) (< ts end-ns)))))\n\n(defn by-address-range\n  \"Predicate: filter by address range (for memory events)\"\n  [start-addr end-addr]\n  (fn [event]\n    (when-let [addr (:address event)]\n      (and (>= addr start-addr) (< addr end-addr)))))\n\n(defn by-level\n  \"Predicate: filter cache events by level\"\n  [level]\n  (fn [event]\n    (= level (:level event))))\n\n;; =============================================================================\n;; Queries (Composable)\n;; =============================================================================\n\n(defn query\n  \"Query events from trace with predicates.\n\n   Usage:\n   (query trace\n          (by-type :cache-miss)\n          (by-pid 1234)\n          (by-time-range 0 1000000))\"\n  [trace & predicates]\n  (let [pred (apply every-pred predicates)]\n    (filter pred (:events trace))))\n\n(defn query-first\n  \"Get first event matching predicates\"\n  [trace & predicates]\n  (first (apply query trace predicates)))\n\n(defn query-count\n  \"Count events matching predicates\"\n  [trace & predicates]\n  (count (apply query trace predicates)))\n\n;; =============================================================================\n;; Aggregations\n;; =============================================================================\n\n(defn group-by-type\n  \"Group events by type\"\n  [events]\n  (group-by :type events))\n\n(defn group-by-pid\n  \"Group events by process ID\"\n  [events]\n  (group-by :pid events))\n\n(defn group-by-address\n  \"Group memory events by cache-line-aligned address\"\n  [events & {:keys [line-size] :or {line-size 64}}]\n  (let [mask (bit-not (dec line-size))]\n    (group-by #(bit-and (or (:address %) 0) mask) events)))\n\n(defn histogram\n  \"Create histogram of event field values\"\n  [events field]\n  (->> events\n       (map field)\n       (filter some?)\n       frequencies\n       (sort-by val >)))\n\n(defn timeline-buckets\n  \"Bucket events by time intervals\"\n  [events bucket-ns]\n  (->> events\n       (group-by #(quot (:timestamp %) bucket-ns))\n       (sort-by key)\n       (map (fn [[bucket evts]]\n              {:bucket bucket\n               :start-ns (* bucket bucket-ns)\n               :end-ns (* (inc bucket) bucket-ns)\n               :count (count evts)\n               :events evts}))))\n\n;; =============================================================================\n;; Analysis Functions\n;; =============================================================================\n\n(defn cache-hit-rate\n  \"Calculate cache hit rate from events\"\n  [events]\n  (let [cache-events (filter #(#{:cache-hit :cache-miss} (:type %)) events)\n        hits (count (filter #(= :cache-hit (:type %)) cache-events))\n        total (count cache-events)]\n    (if (zero? total)\n      nil\n      {:hits hits\n       :misses (- total hits)\n       :total total\n       :hit-rate (/ (double hits) total)})))\n\n(defn cache-hit-rate-by-level\n  \"Calculate hit rate per cache level\"\n  [events]\n  (->> events\n       (filter :level)\n       (group-by :level)\n       (map (fn [[level evts]]\n              [level (cache-hit-rate evts)]))\n       (into {})))\n\n(defn hot-addresses\n  \"Find most frequently accessed addresses\"\n  [events & {:keys [top-n line-size] :or {top-n 20 line-size 64}}]\n  (let [mask (bit-not (dec line-size))]\n    (->> events\n         (keep :address)\n         (map #(bit-and % mask))\n         frequencies\n         (sort-by val >)\n         (take top-n))))\n\n(defn page-fault-summary\n  \"Summarize page fault events\"\n  [events]\n  (let [faults (filter #(#{:page-fault :page-fault-hard} (:type %)) events)\n        hard (filter #(= :page-fault-hard (:type %)) faults)\n        soft (filter #(= :page-fault (:type %)) faults)]\n    {:total (count faults)\n     :hard-faults (count hard)\n     :soft-faults (count soft)\n     :hard-fault-addresses (map :address hard)\n     :by-pid (histogram faults :pid)}))\n\n(defn io-summary\n  \"Summarize disk I/O events\"\n  [events]\n  (let [io-events (filter #(#{:disk-read :disk-write} (:type %)) events)\n        reads (filter #(= :disk-read (:type %)) io-events)\n        writes (filter #(= :disk-write (:type %)) io-events)]\n    {:read-count (count reads)\n     :write-count (count writes)\n     :read-bytes (reduce + 0 (map :size-bytes reads))\n     :write-bytes (reduce + 0 (map :size-bytes writes))\n     :avg-read-latency-ns (when (seq reads)\n                            (/ (reduce + 0 (map :latency-ns reads))\n                               (count reads)))\n     :avg-write-latency-ns (when (seq writes)\n                             (/ (reduce + 0 (map :latency-ns writes))\n                                (count writes)))\n     :max-queue-depth (reduce max 0 (map :queue-depth io-events))}))\n\n;; =============================================================================\n;; Time Series\n;; =============================================================================\n\n(defn events-per-second\n  \"Calculate event rate over time\"\n  [events]\n  (let [ns-per-sec 1000000000\n        buckets (timeline-buckets events ns-per-sec)]\n    (mapv (fn [{:keys [bucket count]}]\n            {:second bucket :events-per-sec count})\n          buckets)))\n\n(defn rolling-hit-rate\n  \"Calculate rolling cache hit rate with window\"\n  [events window-size]\n  (->> events\n       (filter #(#{:cache-hit :cache-miss} (:type %)))\n       (partition window-size 1)\n       (map (fn [window]\n              (let [hits (count (filter #(= :cache-hit (:type %)) window))\n                    ts (:timestamp (last window))]\n                {:timestamp ts\n                 :hit-rate (/ (double hits) window-size)})))))\n\n;; =============================================================================\n;; Correlation\n;; =============================================================================\n\n(defn correlate-miss-to-fault\n  \"Find page faults that follow cache misses (potential causation)\"\n  [events & {:keys [window-ns] :or {window-ns 10000}}]\n  (let [sorted (sort-by :timestamp events)]\n    (for [[miss fault] (partition 2 1 sorted)\n          :when (and (= :cache-miss (:type miss))\n                     (= :page-fault-hard (:type fault))\n                     (< (- (:timestamp fault) (:timestamp miss)) window-ns))]\n      {:miss miss\n       :fault fault\n       :latency-ns (- (:timestamp fault) (:timestamp miss))})))\n\n(defn correlate-io-to-fault\n  \"Find disk I/O following hard page faults\"\n  [events & {:keys [window-ns] :or {window-ns 1000000}}]\n  (let [sorted (sort-by :timestamp events)]\n    (for [[fault io] (partition 2 1 sorted)\n          :when (and (= :page-fault-hard (:type fault))\n                     (= :disk-read (:type io))\n                     (< (- (:timestamp io) (:timestamp fault)) window-ns))]\n      {:fault fault\n       :io io\n       :latency-ns (- (:timestamp io) (:timestamp fault))})))\n\n;; =============================================================================\n;; Export / Serialization\n;; =============================================================================\n\n(defn trace->edn\n  \"Export trace to EDN string\"\n  [trace]\n  (pr-str trace))\n\n(defn edn->trace\n  \"Import trace from EDN string\"\n  [edn-str]\n  #?(:clj (read-string edn-str)\n     :cljs (cljs.reader/read-string edn-str)))\n\n(defn- format-hex\n  \"Format number as hex string\"\n  [n]\n  #?(:clj (format \"0x%x\" n)\n     :cljs (str \"0x\" (.toString n 16))))\n\n(defn events->csv\n  \"Export events to CSV format\"\n  [events]\n  (let [headers [\"timestamp\" \"type\" \"pid\" \"tid\" \"address\" \"level\" \"hit\" \"latency\"]\n        rows (for [e events]\n               [(str (:timestamp e))\n                (name (:type e))\n                (str (:pid e))\n                (str (:tid e))\n                (when-let [a (:address e)] (format-hex a))\n                (some-> (:level e) name)\n                (str (:hit? e))\n                (str (:latency-ns e))])]\n    (str/join \"\\n\"\n              (cons (str/join \",\" headers)\n                    (map #(str/join \",\" %) rows)))))\n\n;; =============================================================================\n;; REPL Exploration\n;; =============================================================================\n\n(comment\n  ;; Create a trace with some events\n  (def trace\n    (-> (make-trace :target-pid 1234)\n        (add-events\n         [{:timestamp 0 :type :cache-miss :pid 1234 :tid 1 :address 0x1000 :level :l1}\n          {:timestamp 10 :type :cache-hit :pid 1234 :tid 1 :address 0x1000 :level :l1}\n          {:timestamp 20 :type :cache-miss :pid 1234 :tid 1 :address 0x2000 :level :l1}\n          {:timestamp 30 :type :page-fault-hard :pid 1234 :tid 1 :address 0x3000}\n          {:timestamp 100 :type :disk-read :pid 1234 :tid 1 :disk-index 0\n           :offset-bytes 0x3000 :size-bytes 4096 :latency-ns 5000 :queue-depth 1}])))\n\n  ;; Query\n  (query trace (by-type :cache-miss))\n  (query trace (by-type :cache-hit :cache-miss) (by-time-range 0 25))\n\n  ;; Analyze\n  (cache-hit-rate (:events trace))\n  (hot-addresses (:events trace))\n  (page-fault-summary (:events trace))\n  (io-summary (:events trace))\n\n  ;; Export\n  (println (events->csv (:events trace)))\n  )\n"]}