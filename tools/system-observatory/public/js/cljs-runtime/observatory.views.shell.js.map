{"version":3,"sources":["observatory/views/shell.cljs"],"mappings":"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","names":["p__12972","map__12973","cljs.core/--destructure-map","cljs.core.get","observatory.views.shell/sidebar-item","id","icon","label","active?","re-frame.core/dispatch","observatory.views.shell/sidebar","cljs.core/deref","current-tab","re_frame.core.subscribe","open?","cljs.core._EQ_","observatory.views.shell/breadcrumb","drill-path","iter__5480__auto__","s__12975","cljs.core/LazySeq","temp__5804__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__5478__auto__","size__5479__auto__","cljs.core/count","b__12977","cljs.core/chunk-buffer","i__12976","vec__12978","cljs.core/-nth","cljs.core.nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__12974","cljs.core/chunk-rest","vec__12981","cljs.core/first","cljs.core/cons","cljs.core/rest","idx","segment","cljs.core.map_indexed","cljs.core/vector","s__12985","b__12987","i__12986","vec__12988","iter__12984","vec__12991","observatory.views.shell/content-panel","G__12994","cljs.core/Keyword","observatory.views.processes/processes-view","observatory.views.cache/cache-view","observatory.views.timeline/timeline-view","observatory.views.shell/status-bar","processes","trace-summary","or__5002__auto__","hit-rate","observatory.views.shell/main-shell","inspector-open?","observatory.views.inspector/inspector-panel","cljs.core/chunk-first"],"sourcesContent":["(ns observatory.views.shell\n  \"Main application shell - sidebar, content area, inspector panel.\n\n   The shell provides the structure for progressive disclosure:\n   - Sidebar: top-level navigation (Processes, Network, Cache, Timeline)\n   - Content: current view based on tab and drill path\n   - Inspector: SLIME-style panel for deep inspection\n   - Breadcrumb: shows current drill path, click to navigate back\"\n  (:require [re-frame.core :as rf]\n            [observatory.state :as state]\n            [observatory.views.processes :as processes]\n            [observatory.views.cache :as cache-view]\n            [observatory.views.inspector :as inspector]\n            [observatory.views.timeline :as timeline]))\n\n;; =============================================================================\n;; Sidebar\n;; =============================================================================\n\n(defn sidebar-item\n  \"A single sidebar navigation item.\"\n  [{:keys [id icon label active?]}]\n  [:button.sidebar-item\n   {:class (when active? \"active\")\n    :on-click #(rf/dispatch [::state/set-tab id])}\n   [:span.icon icon]\n   [:span.label label]])\n\n(defn sidebar\n  \"Main navigation sidebar.\"\n  []\n  (let [current-tab @(rf/subscribe [::state/current-tab])\n        open? @(rf/subscribe [::state/sidebar-open?])]\n    [:nav.sidebar {:class (when-not open? \"collapsed\")}\n     [:div.sidebar-header\n      [:h1.logo \"Observatory\"]\n      [:button.collapse-btn\n       {:on-click #(rf/dispatch [::state/toggle-sidebar])}\n       (if open? \"\u25c0\" \"\u25b6\")]]\n\n     [:div.sidebar-nav\n      [sidebar-item {:id :processes\n                     :icon \"\u2699\"\n                     :label \"Processes\"\n                     :active? (= current-tab :processes)}]\n      [sidebar-item {:id :network\n                     :icon \"\ud83c\udf10\"\n                     :label \"Network\"\n                     :active? (= current-tab :network)}]\n      [sidebar-item {:id :cache\n                     :icon \"\ud83d\udce6\"\n                     :label \"Cache\"\n                     :active? (= current-tab :cache)}]\n      [sidebar-item {:id :memory\n                     :icon \"\ud83e\udde0\"\n                     :label \"Memory\"\n                     :active? (= current-tab :memory)}]\n      [sidebar-item {:id :disk\n                     :icon \"\ud83d\udcbe\"\n                     :label \"Disk\"\n                     :active? (= current-tab :disk)}]\n      [sidebar-item {:id :timeline\n                     :icon \"\u23f1\"\n                     :label \"Timeline\"\n                     :active? (= current-tab :timeline)}]]\n\n     [:div.sidebar-footer\n      [:div.mode-indicator\n       [:span.dot.simulation] \"Simulation Mode\"]]]))\n\n;; =============================================================================\n;; Breadcrumb Navigation\n;; =============================================================================\n\n(defn breadcrumb\n  \"Shows current drill path and allows navigation back up.\"\n  []\n  (let [drill-path @(rf/subscribe [::state/drill-path])]\n    [:div.breadcrumb\n     [:button.crumb.root\n      {:on-click #(rf/dispatch [::state/drill-reset])}\n      \"\ud83c\udfe0 Root\"]\n     (for [[idx segment] (map-indexed vector drill-path)]\n       ^{:key idx}\n       [:span.crumb-separator \" \u203a \"])\n     (for [[idx segment] (map-indexed vector drill-path)]\n       ^{:key (str \"seg-\" idx)}\n       [:button.crumb\n        {:on-click #(rf/dispatch [::state/drill-up])}\n        (str segment)])]))\n\n;; =============================================================================\n;; Main Content Area\n;; =============================================================================\n\n(defn content-panel\n  \"Main content panel - switches based on current tab.\"\n  []\n  (let [current-tab @(rf/subscribe [::state/current-tab])]\n    [:main.content-panel\n     [breadcrumb]\n     [:div.content-body\n      (case current-tab\n        :processes [processes/processes-view]\n        :network   [:div.placeholder \"Network connections - coming soon\"]\n        :cache     [cache-view/cache-view]\n        :memory    [:div.placeholder \"Memory view - coming soon\"]\n        :disk      [:div.placeholder \"Disk view - coming soon\"]\n        :timeline  [timeline/timeline-view]\n        [:div.placeholder \"Select a view from the sidebar\"])]]))\n\n;; =============================================================================\n;; Status Bar\n;; =============================================================================\n\n(defn status-bar\n  \"Bottom status bar with system stats.\"\n  []\n  (let [processes @(rf/subscribe [::state/processes])\n        trace-summary @(rf/subscribe [::state/trace-summary])]\n    [:footer.status-bar\n     [:div.stat\n      [:span.label \"Processes:\"]\n      [:span.value (count processes)]]\n     [:div.stat\n      [:span.label \"Events:\"]\n      [:span.value (or (:total trace-summary) 0)]]\n     (when-let [hit-rate (:hit-rate trace-summary)]\n       [:div.stat\n        [:span.label \"Cache Hit Rate:\"]\n        [:span.value (str (int (* 100 (:hit-rate hit-rate))) \"%\")]])\n     [:div.spacer]\n     [:div.stat\n      [:button.btn-small\n       {:on-click #(rf/dispatch [::state/toggle-inspector])}\n       \"Toggle Inspector\"]]]))\n\n;; =============================================================================\n;; Main Shell\n;; =============================================================================\n\n(defn main-shell\n  \"Root component - assembles the full application layout.\"\n  []\n  (let [inspector-open? @(rf/subscribe [::state/inspector-open?])]\n    [:div.app-shell\n     [sidebar]\n     [:div.main-area\n      [content-panel]\n      [status-bar]]\n     (when inspector-open?\n       [inspector/inspector-panel])]))\n"]}