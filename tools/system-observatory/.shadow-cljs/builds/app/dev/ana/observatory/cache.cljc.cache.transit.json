["^ ","~:output",["^ ","~:js","goog.provide('observatory.cache');\n/**\n * Decompose address into tag, set index, and offset.\n * \n * For a cache with S sets and B byte lines:\n * - Offset bits: log2(B) - identifies byte within line\n * - Index bits: log2(S) - identifies which set\n * - Tag bits: remaining high bits - identifies which line\n * \n * Example for 32KB, 8-way, 64B lines:\n * - 32KB / 8 ways = 4KB per way\n * - 4KB / 64B = 64 sets\n * - Offset: 6 bits (64 bytes)\n * - Index: 6 bits (64 sets)\n * - Tag: 52 bits\n */\nobservatory.cache.address_parts = (function observatory$cache$address_parts(address,p__12153){\nvar map__12154 = p__12153;\nvar map__12154__$1 = cljs.core.__destructure_map(map__12154);\nvar sets = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__12154__$1,new cljs.core.Keyword(null,\"sets\",\"sets\",400955582));\nvar line_size = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__12154__$1,new cljs.core.Keyword(null,\"line-size\",\"line-size\",8517417));\nvar offset_bits = (Math.ceil((Math.log(line_size) / Math.log((2)))) | (0));\nvar index_bits = (Math.ceil((Math.log(sets) / Math.log((2)))) | (0));\nvar offset_mask = (((1) << offset_bits) - (1));\nvar index_mask = (((1) << index_bits) - (1));\nreturn new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,\"offset\",\"offset\",296498311),(address & offset_mask),new cljs.core.Keyword(null,\"set-index\",\"set-index\",797648137),((address >> offset_bits) & index_mask),new cljs.core.Keyword(null,\"tag\",\"tag\",-1290361223),(address >> (offset_bits + index_bits))], null);\n});\n/**\n * Get the cache-line-aligned address (clear offset bits)\n */\nobservatory.cache.line_address = (function observatory$cache$line_address(address,line_size){\nvar offset_bits = (Math.ceil((Math.log(line_size) / Math.log((2)))) | (0));\nreturn (address & (~ (((1) << offset_bits) - (1))));\n});\n/**\n * Create an empty cache way\n */\nobservatory.cache.make_empty_way = (function observatory$cache$make_empty_way(index){\nreturn new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,\"index\",\"index\",-1531685915),index,new cljs.core.Keyword(null,\"line\",\"line\",212345235),null], null);\n});\n/**\n * Create an empty cache set with N ways\n */\nobservatory.cache.make_empty_set = (function observatory$cache$make_empty_set(index,associativity){\nreturn new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,\"index\",\"index\",-1531685915),index,new cljs.core.Keyword(null,\"ways\",\"ways\",1426688978),cljs.core.mapv.cljs$core$IFn$_invoke$arity$2(observatory.cache.make_empty_way,cljs.core.range.cljs$core$IFn$_invoke$arity$1(associativity)),new cljs.core.Keyword(null,\"lru-order\",\"lru-order\",-1890066848),cljs.core.vec(cljs.core.range.cljs$core$IFn$_invoke$arity$1(associativity))], null);\n});\n/**\n * Create a new empty cache from config.\n * \n * Config should have:\n * - :level (:l1, :l2, :l3)\n * - :type (:data, :instruction, :unified)\n * - :size-kb\n * - :line-size (default 64)\n * - :associativity\n */\nobservatory.cache.make_cache = (function observatory$cache$make_cache(p__12158){\nvar map__12159 = p__12158;\nvar map__12159__$1 = cljs.core.__destructure_map(map__12159);\nvar config = map__12159__$1;\nvar level = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__12159__$1,new cljs.core.Keyword(null,\"level\",\"level\",1290497552));\nvar type = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__12159__$1,new cljs.core.Keyword(null,\"type\",\"type\",1174270348));\nvar size_kb = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__12159__$1,new cljs.core.Keyword(null,\"size-kb\",\"size-kb\",-1863311670));\nvar line_size = cljs.core.get.cljs$core$IFn$_invoke$arity$3(map__12159__$1,new cljs.core.Keyword(null,\"line-size\",\"line-size\",8517417),(64));\nvar associativity = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__12159__$1,new cljs.core.Keyword(null,\"associativity\",\"associativity\",835945425));\nvar size_bytes = (size_kb * (1024));\nvar lines = cljs.core.quot(size_bytes,line_size);\nvar sets = cljs.core.quot(lines,associativity);\nreturn new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,\"level\",\"level\",1290497552),level,new cljs.core.Keyword(null,\"type\",\"type\",1174270348),type,new cljs.core.Keyword(null,\"config\",\"config\",994861415),cljs.core.assoc.cljs$core$IFn$_invoke$arity$variadic(config,new cljs.core.Keyword(null,\"sets\",\"sets\",400955582),sets,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new cljs.core.Keyword(null,\"line-size\",\"line-size\",8517417),line_size], 0)),new cljs.core.Keyword(null,\"sets\",\"sets\",400955582),cljs.core.mapv.cljs$core$IFn$_invoke$arity$2((function (p1__12157_SHARP_){\nreturn observatory.cache.make_empty_set(p1__12157_SHARP_,associativity);\n}),cljs.core.range.cljs$core$IFn$_invoke$arity$1(sets)),new cljs.core.Keyword(null,\"stats\",\"stats\",-85643011),new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,\"hits\",\"hits\",-2120002930),(0),new cljs.core.Keyword(null,\"misses\",\"misses\",-1275188323),(0),new cljs.core.Keyword(null,\"evictions\",\"evictions\",-1315226615),(0),new cljs.core.Keyword(null,\"reads\",\"reads\",-1215067361),(0),new cljs.core.Keyword(null,\"writes\",\"writes\",-102226269),(0)], null)], null);\n});\n/**\n * Move a way to MRU position (end of LRU order).\n * Returns updated lru-order vector.\n */\nobservatory.cache.touch_way = (function observatory$cache$touch_way(lru_order,way_index){\nvar filtered = cljs.core.filterv((function (p1__12161_SHARP_){\nreturn cljs.core.not_EQ_.cljs$core$IFn$_invoke$arity$2(p1__12161_SHARP_,way_index);\n}),lru_order);\nreturn cljs.core.conj.cljs$core$IFn$_invoke$arity$2(filtered,way_index);\n});\n/**\n * Get the LRU way index (first in order)\n */\nobservatory.cache.lru_victim = (function observatory$cache$lru_victim(lru_order){\nreturn cljs.core.first(lru_order);\n});\n/**\n * Find a cache line by tag in a set.\n * Returns [way-index line] or nil.\n */\nobservatory.cache.find_line_in_set = (function observatory$cache$find_line_in_set(cache_set,tag){\nreturn cljs.core.first(cljs.core.filter.cljs$core$IFn$_invoke$arity$2(cljs.core.some_QMARK_,cljs.core.map_indexed.cljs$core$IFn$_invoke$arity$2((function (i,way){\nif(cljs.core.truth_((function (){var and__5000__auto__ = new cljs.core.Keyword(null,\"line\",\"line\",212345235).cljs$core$IFn$_invoke$arity$1(way);\nif(cljs.core.truth_(and__5000__auto__)){\nreturn cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,\"tag\",\"tag\",-1290361223).cljs$core$IFn$_invoke$arity$1(new cljs.core.Keyword(null,\"line\",\"line\",212345235).cljs$core$IFn$_invoke$arity$1(way)),tag);\n} else {\nreturn and__5000__auto__;\n}\n})())){\nreturn new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [i,new cljs.core.Keyword(null,\"line\",\"line\",212345235).cljs$core$IFn$_invoke$arity$1(way)], null);\n} else {\nreturn null;\n}\n}),new cljs.core.Keyword(null,\"ways\",\"ways\",1426688978).cljs$core$IFn$_invoke$arity$1(cache_set))));\n});\n/**\n * Find an empty way in a set. Returns way-index or nil.\n */\nobservatory.cache.find_empty_way = (function observatory$cache$find_empty_way(cache_set){\nreturn cljs.core.first(cljs.core.filter.cljs$core$IFn$_invoke$arity$2(cljs.core.some_QMARK_,cljs.core.map_indexed.cljs$core$IFn$_invoke$arity$2((function (i,way){\nif((new cljs.core.Keyword(null,\"line\",\"line\",212345235).cljs$core$IFn$_invoke$arity$1(way) == null)){\nreturn i;\n} else {\nreturn null;\n}\n}),new cljs.core.Keyword(null,\"ways\",\"ways\",1426688978).cljs$core$IFn$_invoke$arity$1(cache_set))));\n});\n/**\n * Update a specific way in a set with a new line\n */\nobservatory.cache.update_way = (function observatory$cache$update_way(cache_set,way_index,line,timestamp){\nreturn cljs.core.update.cljs$core$IFn$_invoke$arity$4(cljs.core.assoc_in(cache_set,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\"ways\",\"ways\",1426688978),way_index,new cljs.core.Keyword(null,\"line\",\"line\",212345235)], null),cljs.core.assoc.cljs$core$IFn$_invoke$arity$variadic(line,new cljs.core.Keyword(null,\"last-access\",\"last-access\",1110221580),timestamp,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([new cljs.core.Keyword(null,\"access-count\",\"access-count\",169899798),(cljs.core.get.cljs$core$IFn$_invoke$arity$3(line,new cljs.core.Keyword(null,\"access-count\",\"access-count\",169899798),(0)) + (1))], 0))),new cljs.core.Keyword(null,\"lru-order\",\"lru-order\",-1890066848),observatory.cache.touch_way,way_index);\n});\n/**\n * Evict LRU line and insert new one.\n * Returns [new-set evicted-line]\n */\nobservatory.cache.evict_and_insert = (function observatory$cache$evict_and_insert(cache_set,new_line,timestamp){\nvar victim_way = observatory.cache.lru_victim(new cljs.core.Keyword(null,\"lru-order\",\"lru-order\",-1890066848).cljs$core$IFn$_invoke$arity$1(cache_set));\nvar evicted = cljs.core.get_in.cljs$core$IFn$_invoke$arity$2(cache_set,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\"ways\",\"ways\",1426688978),victim_way,new cljs.core.Keyword(null,\"line\",\"line\",212345235)], null));\nvar new_set = observatory.cache.update_way(cache_set,victim_way,new_line,timestamp);\nreturn new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new_set,evicted], null);\n});\n/**\n * Perform a cache access. Pure function.\n * \n * Arguments:\n * - cache: current cache state\n * - address: memory address being accessed\n * - timestamp: current timestamp (for LRU tracking)\n * - opts: {:write? false, :data nil}\n * \n * Returns:\n * {:cache new-cache-state\n *  :result {:hit? bool\n *           :level :l1/:l2/:l3\n *           :set-index int\n *           :way-index int (or nil for miss)\n *           :evicted nil or {:address :data :dirty?}\n *           :latency-cycles int}}\n */\nobservatory.cache.access = (function observatory$cache$access(var_args){\nvar args__5732__auto__ = [];\nvar len__5726__auto___12289 = arguments.length;\nvar i__5727__auto___12290 = (0);\nwhile(true){\nif((i__5727__auto___12290 < len__5726__auto___12289)){\nargs__5732__auto__.push((arguments[i__5727__auto___12290]));\n\nvar G__12291 = (i__5727__auto___12290 + (1));\ni__5727__auto___12290 = G__12291;\ncontinue;\n} else {\n}\nbreak;\n}\n\nvar argseq__5733__auto__ = ((((3) < args__5732__auto__.length))?(new cljs.core.IndexedSeq(args__5732__auto__.slice((3)),(0),null)):null);\nreturn observatory.cache.access.cljs$core$IFn$_invoke$arity$variadic((arguments[(0)]),(arguments[(1)]),(arguments[(2)]),argseq__5733__auto__);\n});\n\n(observatory.cache.access.cljs$core$IFn$_invoke$arity$variadic = (function (cache,address,timestamp,p__12168){\nvar vec__12169 = p__12168;\nvar map__12172 = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__12169,(0),null);\nvar map__12172__$1 = cljs.core.__destructure_map(map__12172);\nvar write_QMARK_ = cljs.core.get.cljs$core$IFn$_invoke$arity$3(map__12172__$1,new cljs.core.Keyword(null,\"write?\",\"write?\",673505583),false);\nvar data = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__12172__$1,new cljs.core.Keyword(null,\"data\",\"data\",-232669377));\nvar map__12173 = cache;\nvar map__12173__$1 = cljs.core.__destructure_map(map__12173);\nvar config = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__12173__$1,new cljs.core.Keyword(null,\"config\",\"config\",994861415));\nvar sets = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__12173__$1,new cljs.core.Keyword(null,\"sets\",\"sets\",400955582));\nvar map__12174 = observatory.cache.address_parts(address,config);\nvar map__12174__$1 = cljs.core.__destructure_map(map__12174);\nvar set_index = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__12174__$1,new cljs.core.Keyword(null,\"set-index\",\"set-index\",797648137));\nvar tag = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__12174__$1,new cljs.core.Keyword(null,\"tag\",\"tag\",-1290361223));\nvar cache_set = cljs.core.get.cljs$core$IFn$_invoke$arity$2(sets,set_index);\nvar vec__12175 = observatory.cache.find_line_in_set(cache_set,tag);\nvar way_index = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__12175,(0),null);\nvar existing_line = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__12175,(1),null);\nif(cljs.core.truth_(existing_line)){\nvar updated_line = (function (){var G__12178 = existing_line;\nvar G__12178__$1 = (cljs.core.truth_(write_QMARK_)?cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(G__12178,new cljs.core.Keyword(null,\"state\",\"state\",-1988618099),new cljs.core.Keyword(null,\"modified\",\"modified\",-2134587826)):G__12178);\nif(cljs.core.truth_(data)){\nreturn cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(G__12178__$1,new cljs.core.Keyword(null,\"data\",\"data\",-232669377),data);\n} else {\nreturn G__12178__$1;\n}\n})();\nvar new_set = observatory.cache.update_way(cache_set,way_index,updated_line,timestamp);\nvar new_cache = cljs.core.update_in.cljs$core$IFn$_invoke$arity$3(cljs.core.update_in.cljs$core$IFn$_invoke$arity$3(cljs.core.assoc_in(cache,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\"sets\",\"sets\",400955582),set_index], null),new_set),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\"stats\",\"stats\",-85643011),new cljs.core.Keyword(null,\"hits\",\"hits\",-2120002930)], null),cljs.core.inc),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\"stats\",\"stats\",-85643011),(cljs.core.truth_(write_QMARK_)?new cljs.core.Keyword(null,\"writes\",\"writes\",-102226269):new cljs.core.Keyword(null,\"reads\",\"reads\",-1215067361))], null),cljs.core.inc);\nreturn new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,\"cache\",\"cache\",-1237023054),new_cache,new cljs.core.Keyword(null,\"result\",\"result\",1415092211),new cljs.core.PersistentArrayMap(null, 6, [new cljs.core.Keyword(null,\"hit?\",\"hit?\",-364237458),true,new cljs.core.Keyword(null,\"level\",\"level\",1290497552),new cljs.core.Keyword(null,\"level\",\"level\",1290497552).cljs$core$IFn$_invoke$arity$1(cache),new cljs.core.Keyword(null,\"set-index\",\"set-index\",797648137),set_index,new cljs.core.Keyword(null,\"way-index\",\"way-index\",1268630527),way_index,new cljs.core.Keyword(null,\"evicted\",\"evicted\",1052280659),null,new cljs.core.Keyword(null,\"latency-cycles\",\"latency-cycles\",-682475027),(function (){var G__12181 = new cljs.core.Keyword(null,\"level\",\"level\",1290497552).cljs$core$IFn$_invoke$arity$1(cache);\nvar G__12181__$1 = (((G__12181 instanceof cljs.core.Keyword))?G__12181.fqn:null);\nswitch (G__12181__$1) {\ncase \"l1\":\nreturn (4);\n\nbreak;\ncase \"l2\":\nreturn (12);\n\nbreak;\ncase \"l3\":\nreturn (36);\n\nbreak;\ndefault:\nthrow (new Error([\"No matching clause: \",cljs.core.str.cljs$core$IFn$_invoke$arity$1(G__12181__$1)].join('')));\n\n}\n})()], null)], null);\n} else {\nvar new_line = new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,\"tag\",\"tag\",-1290361223),tag,new cljs.core.Keyword(null,\"data\",\"data\",-232669377),(function (){var or__5002__auto__ = data;\nif(cljs.core.truth_(or__5002__auto__)){\nreturn or__5002__auto__;\n} else {\nreturn cljs.core.vec(cljs.core.repeat.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,\"line-size\",\"line-size\",8517417).cljs$core$IFn$_invoke$arity$1(config),(0)));\n}\n})(),new cljs.core.Keyword(null,\"state\",\"state\",-1988618099),(cljs.core.truth_(write_QMARK_)?new cljs.core.Keyword(null,\"modified\",\"modified\",-2134587826):new cljs.core.Keyword(null,\"exclusive\",\"exclusive\",-1507998718)),new cljs.core.Keyword(null,\"last-access\",\"last-access\",1110221580),timestamp,new cljs.core.Keyword(null,\"access-count\",\"access-count\",169899798),(1)], null);\nvar empty_way = observatory.cache.find_empty_way(cache_set);\nvar vec__12198 = (cljs.core.truth_(empty_way)?new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [observatory.cache.update_way(cache_set,empty_way,new_line,timestamp),null], null):observatory.cache.evict_and_insert(cache_set,new_line,timestamp));\nvar new_set = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__12198,(0),null);\nvar evicted = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__12198,(1),null);\nvar new_cache = (function (){var G__12201 = cljs.core.update_in.cljs$core$IFn$_invoke$arity$3(cljs.core.update_in.cljs$core$IFn$_invoke$arity$3(cljs.core.assoc_in(cache,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\"sets\",\"sets\",400955582),set_index], null),new_set),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\"stats\",\"stats\",-85643011),new cljs.core.Keyword(null,\"misses\",\"misses\",-1275188323)], null),cljs.core.inc),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\"stats\",\"stats\",-85643011),(cljs.core.truth_(write_QMARK_)?new cljs.core.Keyword(null,\"writes\",\"writes\",-102226269):new cljs.core.Keyword(null,\"reads\",\"reads\",-1215067361))], null),cljs.core.inc);\nif(cljs.core.truth_(evicted)){\nreturn cljs.core.update_in.cljs$core$IFn$_invoke$arity$3(G__12201,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\"stats\",\"stats\",-85643011),new cljs.core.Keyword(null,\"evictions\",\"evictions\",-1315226615)], null),cljs.core.inc);\n} else {\nreturn G__12201;\n}\n})();\nreturn new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,\"cache\",\"cache\",-1237023054),new_cache,new cljs.core.Keyword(null,\"result\",\"result\",1415092211),new cljs.core.PersistentArrayMap(null, 6, [new cljs.core.Keyword(null,\"hit?\",\"hit?\",-364237458),false,new cljs.core.Keyword(null,\"level\",\"level\",1290497552),new cljs.core.Keyword(null,\"level\",\"level\",1290497552).cljs$core$IFn$_invoke$arity$1(cache),new cljs.core.Keyword(null,\"set-index\",\"set-index\",797648137),set_index,new cljs.core.Keyword(null,\"way-index\",\"way-index\",1268630527),(function (){var or__5002__auto__ = empty_way;\nif(cljs.core.truth_(or__5002__auto__)){\nreturn or__5002__auto__;\n} else {\nreturn observatory.cache.lru_victim(new cljs.core.Keyword(null,\"lru-order\",\"lru-order\",-1890066848).cljs$core$IFn$_invoke$arity$1(cache_set));\n}\n})(),new cljs.core.Keyword(null,\"evicted\",\"evicted\",1052280659),(cljs.core.truth_(evicted)?new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,\"address\",\"address\",559499426),(new cljs.core.Keyword(null,\"tag\",\"tag\",-1290361223).cljs$core$IFn$_invoke$arity$1(evicted) << ((Math.ceil((Math.log(new cljs.core.Keyword(null,\"sets\",\"sets\",400955582).cljs$core$IFn$_invoke$arity$1(config)) / Math.log((2)))) | (0)) + (Math.ceil((Math.log(new cljs.core.Keyword(null,\"line-size\",\"line-size\",8517417).cljs$core$IFn$_invoke$arity$1(config)) / Math.log((2)))) | (0)))),new cljs.core.Keyword(null,\"data\",\"data\",-232669377),new cljs.core.Keyword(null,\"data\",\"data\",-232669377).cljs$core$IFn$_invoke$arity$1(evicted),new cljs.core.Keyword(null,\"dirty?\",\"dirty?\",-2059845846),cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,\"modified\",\"modified\",-2134587826),new cljs.core.Keyword(null,\"state\",\"state\",-1988618099).cljs$core$IFn$_invoke$arity$1(evicted))], null):null),new cljs.core.Keyword(null,\"latency-cycles\",\"latency-cycles\",-682475027),(function (){var G__12209 = new cljs.core.Keyword(null,\"level\",\"level\",1290497552).cljs$core$IFn$_invoke$arity$1(cache);\nvar G__12209__$1 = (((G__12209 instanceof cljs.core.Keyword))?G__12209.fqn:null);\nswitch (G__12209__$1) {\ncase \"l1\":\nreturn (4);\n\nbreak;\ncase \"l2\":\nreturn (12);\n\nbreak;\ncase \"l3\":\nreturn (36);\n\nbreak;\ndefault:\nthrow (new Error([\"No matching clause: \",cljs.core.str.cljs$core$IFn$_invoke$arity$1(G__12209__$1)].join('')));\n\n}\n})()], null)], null);\n}\n}));\n\n(observatory.cache.access.cljs$lang$maxFixedArity = (3));\n\n/** @this {Function} */\n(observatory.cache.access.cljs$lang$applyTo = (function (seq12162){\nvar G__12163 = cljs.core.first(seq12162);\nvar seq12162__$1 = cljs.core.next(seq12162);\nvar G__12164 = cljs.core.first(seq12162__$1);\nvar seq12162__$2 = cljs.core.next(seq12162__$1);\nvar G__12165 = cljs.core.first(seq12162__$2);\nvar seq12162__$3 = cljs.core.next(seq12162__$2);\nvar self__5711__auto__ = this;\nreturn self__5711__auto__.cljs$core$IFn$_invoke$arity$variadic(G__12163,G__12164,G__12165,seq12162__$3);\n}));\n\n/**\n * Create a multi-level cache hierarchy.\n * \n * Example config:\n * {:l1d {:size-kb 32 :associativity 8 :type :data}\n *  :l1i {:size-kb 32 :associativity 8 :type :instruction}\n *  :l2  {:size-kb 256 :associativity 4 :type :unified}\n *  :l3  {:size-kb 8192 :associativity 16 :type :unified}}\n */\nobservatory.cache.make_cache_hierarchy = (function observatory$cache$make_cache_hierarchy(config){\nreturn new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,\"l1d\",\"l1d\",223086801),(cljs.core.truth_(new cljs.core.Keyword(null,\"l1d\",\"l1d\",223086801).cljs$core$IFn$_invoke$arity$1(config))?observatory.cache.make_cache(cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(new cljs.core.Keyword(null,\"l1d\",\"l1d\",223086801).cljs$core$IFn$_invoke$arity$1(config),new cljs.core.Keyword(null,\"level\",\"level\",1290497552),new cljs.core.Keyword(null,\"l1\",\"l1\",1864175779))):null),new cljs.core.Keyword(null,\"l1i\",\"l1i\",1449379658),(cljs.core.truth_(new cljs.core.Keyword(null,\"l1i\",\"l1i\",1449379658).cljs$core$IFn$_invoke$arity$1(config))?observatory.cache.make_cache(cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(new cljs.core.Keyword(null,\"l1i\",\"l1i\",1449379658).cljs$core$IFn$_invoke$arity$1(config),new cljs.core.Keyword(null,\"level\",\"level\",1290497552),new cljs.core.Keyword(null,\"l1\",\"l1\",1864175779))):null),new cljs.core.Keyword(null,\"l2\",\"l2\",-462426027),(cljs.core.truth_(new cljs.core.Keyword(null,\"l2\",\"l2\",-462426027).cljs$core$IFn$_invoke$arity$1(config))?observatory.cache.make_cache(cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(new cljs.core.Keyword(null,\"l2\",\"l2\",-462426027).cljs$core$IFn$_invoke$arity$1(config),new cljs.core.Keyword(null,\"level\",\"level\",1290497552),new cljs.core.Keyword(null,\"l2\",\"l2\",-462426027))):null),new cljs.core.Keyword(null,\"l3\",\"l3\",1415952440),(cljs.core.truth_(new cljs.core.Keyword(null,\"l3\",\"l3\",1415952440).cljs$core$IFn$_invoke$arity$1(config))?observatory.cache.make_cache(cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(new cljs.core.Keyword(null,\"l3\",\"l3\",1415952440).cljs$core$IFn$_invoke$arity$1(config),new cljs.core.Keyword(null,\"level\",\"level\",1290497552),new cljs.core.Keyword(null,\"l3\",\"l3\",1415952440))):null)], null);\n});\n/**\n * Access through cache hierarchy.\n * \n * Checks L1 -> L2 -> L3 -> RAM.\n * On miss, fills all levels.\n * \n * Returns:\n * {:hierarchy new-hierarchy\n *  :results [{:level :l1 :hit? true/false ...} ...]\n *  :total-latency int\n *  :final-level :l1/:l2/:l3/:ram}\n */\nobservatory.cache.hierarchy_access = (function observatory$cache$hierarchy_access(var_args){\nvar args__5732__auto__ = [];\nvar len__5726__auto___12305 = arguments.length;\nvar i__5727__auto___12306 = (0);\nwhile(true){\nif((i__5727__auto___12306 < len__5726__auto___12305)){\nargs__5732__auto__.push((arguments[i__5727__auto___12306]));\n\nvar G__12308 = (i__5727__auto___12306 + (1));\ni__5727__auto___12306 = G__12308;\ncontinue;\n} else {\n}\nbreak;\n}\n\nvar argseq__5733__auto__ = ((((3) < args__5732__auto__.length))?(new cljs.core.IndexedSeq(args__5732__auto__.slice((3)),(0),null)):null);\nreturn observatory.cache.hierarchy_access.cljs$core$IFn$_invoke$arity$variadic((arguments[(0)]),(arguments[(1)]),(arguments[(2)]),argseq__5733__auto__);\n});\n\n(observatory.cache.hierarchy_access.cljs$core$IFn$_invoke$arity$variadic = (function (hierarchy,address,timestamp,p__12226){\nvar vec__12227 = p__12226;\nvar map__12230 = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__12227,(0),null);\nvar map__12230__$1 = cljs.core.__destructure_map(map__12230);\nvar opts = map__12230__$1;\nvar write_QMARK_ = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__12230__$1,new cljs.core.Keyword(null,\"write?\",\"write?\",673505583));\nvar instruction_QMARK_ = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__12230__$1,new cljs.core.Keyword(null,\"instruction?\",\"instruction?\",1170992380));\nvar l1_cache = (cljs.core.truth_(instruction_QMARK_)?new cljs.core.Keyword(null,\"l1i\",\"l1i\",1449379658).cljs$core$IFn$_invoke$arity$1(hierarchy):new cljs.core.Keyword(null,\"l1d\",\"l1d\",223086801).cljs$core$IFn$_invoke$arity$1(hierarchy));\nvar levels = (function (){var G__12231 = cljs.core.PersistentVector.EMPTY;\nvar G__12231__$1 = (cljs.core.truth_(l1_cache)?cljs.core.conj.cljs$core$IFn$_invoke$arity$2(G__12231,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\"l1\",\"l1\",1864175779),l1_cache,(cljs.core.truth_(instruction_QMARK_)?new cljs.core.Keyword(null,\"l1i\",\"l1i\",1449379658):new cljs.core.Keyword(null,\"l1d\",\"l1d\",223086801))], null)):G__12231);\nvar G__12231__$2 = (cljs.core.truth_(new cljs.core.Keyword(null,\"l2\",\"l2\",-462426027).cljs$core$IFn$_invoke$arity$1(hierarchy))?cljs.core.conj.cljs$core$IFn$_invoke$arity$2(G__12231__$1,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\"l2\",\"l2\",-462426027),new cljs.core.Keyword(null,\"l2\",\"l2\",-462426027).cljs$core$IFn$_invoke$arity$1(hierarchy),new cljs.core.Keyword(null,\"l2\",\"l2\",-462426027)], null)):G__12231__$1);\nif(cljs.core.truth_(new cljs.core.Keyword(null,\"l3\",\"l3\",1415952440).cljs$core$IFn$_invoke$arity$1(hierarchy))){\nreturn cljs.core.conj.cljs$core$IFn$_invoke$arity$2(G__12231__$2,new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,\"l3\",\"l3\",1415952440),new cljs.core.Keyword(null,\"l3\",\"l3\",1415952440).cljs$core$IFn$_invoke$arity$1(hierarchy),new cljs.core.Keyword(null,\"l3\",\"l3\",1415952440)], null));\n} else {\nreturn G__12231__$2;\n}\n})();\nvar remaining = levels;\nvar current_hierarchy = hierarchy;\nvar results = cljs.core.PersistentVector.EMPTY;\nvar found_at = null;\nwhile(true){\nif(cljs.core.truth_((function (){var or__5002__auto__ = cljs.core.empty_QMARK_(remaining);\nif(or__5002__auto__){\nreturn or__5002__auto__;\n} else {\nreturn found_at;\n}\n})())){\nvar total_latency = (cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(cljs.core._PLUS_,(0),cljs.core.map.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,\"latency-cycles\",\"latency-cycles\",-682475027),results)) + (cljs.core.truth_(found_at)?(0):(100)));\nreturn new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,\"hierarchy\",\"hierarchy\",-1053470341),current_hierarchy,new cljs.core.Keyword(null,\"results\",\"results\",-1134170113),results,new cljs.core.Keyword(null,\"total-latency\",\"total-latency\",166706795),total_latency,new cljs.core.Keyword(null,\"final-level\",\"final-level\",493390115),(function (){var or__5002__auto__ = found_at;\nif(cljs.core.truth_(or__5002__auto__)){\nreturn or__5002__auto__;\n} else {\nreturn new cljs.core.Keyword(null,\"ram\",\"ram\",-1633008146);\n}\n})()], null);\n} else {\nvar vec__12240 = cljs.core.first(remaining);\nvar level = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__12240,(0),null);\nvar cache = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__12240,(1),null);\nvar key = cljs.core.nth.cljs$core$IFn$_invoke$arity$3(vec__12240,(2),null);\nvar map__12243 = observatory.cache.access.cljs$core$IFn$_invoke$arity$variadic(cache,address,timestamp,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([opts], 0));\nvar map__12243__$1 = cljs.core.__destructure_map(map__12243);\nvar cache__$1 = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__12243__$1,new cljs.core.Keyword(null,\"cache\",\"cache\",-1237023054));\nvar result = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__12243__$1,new cljs.core.Keyword(null,\"result\",\"result\",1415092211));\nvar new_hierarchy = cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(current_hierarchy,key,cache__$1);\nvar new_results = cljs.core.conj.cljs$core$IFn$_invoke$arity$2(results,result);\nif(cljs.core.truth_(new cljs.core.Keyword(null,\"hit?\",\"hit?\",-364237458).cljs$core$IFn$_invoke$arity$1(result))){\nvar G__12315 = cljs.core.PersistentVector.EMPTY;\nvar G__12316 = new_hierarchy;\nvar G__12317 = new_results;\nvar G__12318 = level;\nremaining = G__12315;\ncurrent_hierarchy = G__12316;\nresults = G__12317;\nfound_at = G__12318;\ncontinue;\n} else {\nvar G__12319 = cljs.core.rest(remaining);\nvar G__12320 = new_hierarchy;\nvar G__12321 = new_results;\nvar G__12322 = null;\nremaining = G__12319;\ncurrent_hierarchy = G__12320;\nresults = G__12321;\nfound_at = G__12322;\ncontinue;\n}\n}\nbreak;\n}\n}));\n\n(observatory.cache.hierarchy_access.cljs$lang$maxFixedArity = (3));\n\n/** @this {Function} */\n(observatory.cache.hierarchy_access.cljs$lang$applyTo = (function (seq12217){\nvar G__12218 = cljs.core.first(seq12217);\nvar seq12217__$1 = cljs.core.next(seq12217);\nvar G__12219 = cljs.core.first(seq12217__$1);\nvar seq12217__$2 = cljs.core.next(seq12217__$1);\nvar G__12220 = cljs.core.first(seq12217__$2);\nvar seq12217__$3 = cljs.core.next(seq12217__$2);\nvar self__5711__auto__ = this;\nreturn self__5711__auto__.cljs$core$IFn$_invoke$arity$variadic(G__12218,G__12219,G__12220,seq12217__$3);\n}));\n\n/**\n * Replay a sequence of memory accesses through cache hierarchy.\n * \n * accesses: [{:address 0x... :timestamp 0 :write? false} ...]\n * \n * Returns sequence of access results with running state.\n */\nobservatory.cache.replay_accesses = (function observatory$cache$replay_accesses(hierarchy,accesses){\nreturn cljs.core.reductions.cljs$core$IFn$_invoke$arity$3((function (p__12250,p__12251){\nvar map__12252 = p__12250;\nvar map__12252__$1 = cljs.core.__destructure_map(map__12252);\nvar hierarchy__$1 = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__12252__$1,new cljs.core.Keyword(null,\"hierarchy\",\"hierarchy\",-1053470341));\nvar map__12253 = p__12251;\nvar map__12253__$1 = cljs.core.__destructure_map(map__12253);\nvar access_info = map__12253__$1;\nvar address = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__12253__$1,new cljs.core.Keyword(null,\"address\",\"address\",559499426));\nvar timestamp = cljs.core.get.cljs$core$IFn$_invoke$arity$2(map__12253__$1,new cljs.core.Keyword(null,\"timestamp\",\"timestamp\",579478971));\nvar result = observatory.cache.hierarchy_access.cljs$core$IFn$_invoke$arity$variadic(hierarchy__$1,address,timestamp,cljs.core.prim_seq.cljs$core$IFn$_invoke$arity$2([access_info], 0));\nreturn cljs.core.assoc.cljs$core$IFn$_invoke$arity$3(result,new cljs.core.Keyword(null,\"access\",\"access\",2027349272),access_info);\n}),new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,\"hierarchy\",\"hierarchy\",-1053470341),hierarchy,new cljs.core.Keyword(null,\"results\",\"results\",-1134170113),cljs.core.PersistentVector.EMPTY,new cljs.core.Keyword(null,\"total-latency\",\"total-latency\",166706795),(0),new cljs.core.Keyword(null,\"final-level\",\"final-level\",493390115),null], null),accesses);\n});\n/**\n * Summarize results of replay-accesses\n */\nobservatory.cache.summarize_replay = (function observatory$cache$summarize_replay(replay_results){\nvar results = cljs.core.rest(replay_results);\nreturn new cljs.core.PersistentArrayMap(null, 7, [new cljs.core.Keyword(null,\"total-accesses\",\"total-accesses\",-1913751768),cljs.core.count(results),new cljs.core.Keyword(null,\"l1-hits\",\"l1-hits\",1170871182),cljs.core.count(cljs.core.filter.cljs$core$IFn$_invoke$arity$2((function (p1__12254_SHARP_){\nreturn cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,\"l1\",\"l1\",1864175779),new cljs.core.Keyword(null,\"final-level\",\"final-level\",493390115).cljs$core$IFn$_invoke$arity$1(p1__12254_SHARP_));\n}),results)),new cljs.core.Keyword(null,\"l2-hits\",\"l2-hits\",-153675918),cljs.core.count(cljs.core.filter.cljs$core$IFn$_invoke$arity$2((function (p1__12255_SHARP_){\nreturn cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,\"l2\",\"l2\",-462426027),new cljs.core.Keyword(null,\"final-level\",\"final-level\",493390115).cljs$core$IFn$_invoke$arity$1(p1__12255_SHARP_));\n}),results)),new cljs.core.Keyword(null,\"l3-hits\",\"l3-hits\",-1218584748),cljs.core.count(cljs.core.filter.cljs$core$IFn$_invoke$arity$2((function (p1__12256_SHARP_){\nreturn cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,\"l3\",\"l3\",1415952440),new cljs.core.Keyword(null,\"final-level\",\"final-level\",493390115).cljs$core$IFn$_invoke$arity$1(p1__12256_SHARP_));\n}),results)),new cljs.core.Keyword(null,\"ram-accesses\",\"ram-accesses\",890357625),cljs.core.count(cljs.core.filter.cljs$core$IFn$_invoke$arity$2((function (p1__12257_SHARP_){\nreturn cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,\"ram\",\"ram\",-1633008146),new cljs.core.Keyword(null,\"final-level\",\"final-level\",493390115).cljs$core$IFn$_invoke$arity$1(p1__12257_SHARP_));\n}),results)),new cljs.core.Keyword(null,\"total-cycles\",\"total-cycles\",-1331413246),cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(cljs.core._PLUS_,(0),cljs.core.map.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,\"total-latency\",\"total-latency\",166706795),results)),new cljs.core.Keyword(null,\"avg-latency\",\"avg-latency\",519741513),(cljs.core.reduce.cljs$core$IFn$_invoke$arity$3(cljs.core._PLUS_,0.0,cljs.core.map.cljs$core$IFn$_invoke$arity$2(new cljs.core.Keyword(null,\"total-latency\",\"total-latency\",166706795),results)) / (function (){var x__5087__auto__ = (1);\nvar y__5088__auto__ = cljs.core.count(results);\nreturn ((x__5087__auto__ > y__5088__auto__) ? x__5087__auto__ : y__5088__auto__);\n})())], null);\n});\n","~:ns-info",["^ ","~:rename-macros",null,"~:renames",["^ "],"~:meta",["^ ","~:doc","Pure functional cache simulator.\n\n   Models set-associative caches with LRU replacement.\n   All functions are pure - take state, return new state.\n\n   Design:\n   - Cache state is a plain map\n   - Access returns [new-state result]\n   - Can step through access-by-access\n   - Can replay any sequence of accesses","~:file","observatory/cache.cljc","~:line",1,"~:column",5,"~:end-line",1,"~:end-column",22],"~:ns-aliases",["^ ","~$cljs.loader","~$shadow.loader","~$react-dom","~$module$node_modules$react_dom$index","~$react","~$module$node_modules$react$index","~$clojure.core","~$cljs.core","~$clojure.spec.gen.alpha","~$cljs.spec.gen.alpha"],"~:use-macros",null,"~:excludes",["~#set",[]],"~:name","~$observatory.cache","~:reader-aliases",["^ "],"~:op","~:ns","~:imports",null,"~:requires",["^ ","~$observatory.schema","^Q","~$schema","^Q","^D","^D","~$goog","^S"],"~:seen",["^I",["~:require"]],"~:uses",null,"~:require-macros",["^ ","^D","^D"],"~:form",["~#list",["~$ns","^K","Pure functional cache simulator.\n\n   Models set-associative caches with LRU replacement.\n   All functions are pure - take state, return new state.\n\n   Design:\n   - Cache state is a plain map\n   - Access returns [new-state result]\n   - Can step through access-by-access\n   - Can replay any sequence of accesses",["^Y",["^U",["^Q","~:as","^R"]]]]],"~:flags",["^ ","^U",["^I",[]]],"~:js-deps",[],"~:deps",["^S","^D","^Q"]],"^N","^K","~:resource-id",["~:shadow.build.classpath/resource","observatory/cache.cljc"],"~:compiled-at",1768326514831,"^L",["^ ","^Q","^Q","^R","^Q","^D","^D","^S","^S"],"~:resource-name","observatory/cache.cljc","~:warnings",[],"~:source","(ns observatory.cache\n  \"Pure functional cache simulator.\n\n   Models set-associative caches with LRU replacement.\n   All functions are pure - take state, return new state.\n\n   Design:\n   - Cache state is a plain map\n   - Access returns [new-state result]\n   - Can step through access-by-access\n   - Can replay any sequence of accesses\"\n  (:require [observatory.schema :as schema]))\n\n;; =============================================================================\n;; Address Decomposition\n;; =============================================================================\n\n(defn address-parts\n  \"Decompose address into tag, set index, and offset.\n\n   For a cache with S sets and B byte lines:\n   - Offset bits: log2(B) - identifies byte within line\n   - Index bits: log2(S) - identifies which set\n   - Tag bits: remaining high bits - identifies which line\n\n   Example for 32KB, 8-way, 64B lines:\n   - 32KB / 8 ways = 4KB per way\n   - 4KB / 64B = 64 sets\n   - Offset: 6 bits (64 bytes)\n   - Index: 6 bits (64 sets)\n   - Tag: 52 bits\"\n  [address {:keys [sets line-size]}]\n  (let [offset-bits (int (Math/ceil (/ (Math/log line-size) (Math/log 2))))\n        index-bits (int (Math/ceil (/ (Math/log sets) (Math/log 2))))\n        offset-mask (dec (bit-shift-left 1 offset-bits))\n        index-mask (dec (bit-shift-left 1 index-bits))]\n    {:offset (bit-and address offset-mask)\n     :set-index (bit-and (bit-shift-right address offset-bits) index-mask)\n     :tag (bit-shift-right address (+ offset-bits index-bits))}))\n\n(defn line-address\n  \"Get the cache-line-aligned address (clear offset bits)\"\n  [address line-size]\n  (let [offset-bits (int (Math/ceil (/ (Math/log line-size) (Math/log 2))))]\n    (bit-and address (bit-not (dec (bit-shift-left 1 offset-bits))))))\n\n;; =============================================================================\n;; Cache Construction\n;; =============================================================================\n\n(defn make-empty-way\n  \"Create an empty cache way\"\n  [index]\n  {:index index\n   :line nil})\n\n(defn make-empty-set\n  \"Create an empty cache set with N ways\"\n  [index associativity]\n  {:index index\n   :ways (mapv make-empty-way (range associativity))\n   :lru-order (vec (range associativity))})  ; All ways in LRU order\n\n(defn make-cache\n  \"Create a new empty cache from config.\n\n   Config should have:\n   - :level (:l1, :l2, :l3)\n   - :type (:data, :instruction, :unified)\n   - :size-kb\n   - :line-size (default 64)\n   - :associativity\"\n  [{:keys [level type size-kb line-size associativity] :as config\n    :or {line-size 64}}]\n  (let [size-bytes (* size-kb 1024)\n        lines (quot size-bytes line-size)\n        sets (quot lines associativity)]\n    {:level level\n     :type type\n     :config (assoc config :sets sets :line-size line-size)\n     :sets (mapv #(make-empty-set % associativity) (range sets))\n     :stats {:hits 0\n             :misses 0\n             :evictions 0\n             :reads 0\n             :writes 0}}))\n\n;; =============================================================================\n;; LRU Management (Pure Functions)\n;; =============================================================================\n\n(defn touch-way\n  \"Move a way to MRU position (end of LRU order).\n   Returns updated lru-order vector.\"\n  [lru-order way-index]\n  (let [filtered (filterv #(not= % way-index) lru-order)]\n    (conj filtered way-index)))\n\n(defn lru-victim\n  \"Get the LRU way index (first in order)\"\n  [lru-order]\n  (first lru-order))\n\n;; =============================================================================\n;; Cache Operations (Pure Functions)\n;; =============================================================================\n\n(defn find-line-in-set\n  \"Find a cache line by tag in a set.\n   Returns [way-index line] or nil.\"\n  [cache-set tag]\n  (->> (:ways cache-set)\n       (map-indexed (fn [i way]\n                      (when (and (:line way)\n                                 (= (:tag (:line way)) tag))\n                        [i (:line way)])))\n       (filter some?)\n       first))\n\n(defn find-empty-way\n  \"Find an empty way in a set. Returns way-index or nil.\"\n  [cache-set]\n  (->> (:ways cache-set)\n       (map-indexed (fn [i way] (when (nil? (:line way)) i)))\n       (filter some?)\n       first))\n\n(defn update-way\n  \"Update a specific way in a set with a new line\"\n  [cache-set way-index line timestamp]\n  (-> cache-set\n      (assoc-in [:ways way-index :line]\n                (assoc line\n                       :last-access timestamp\n                       :access-count (inc (get line :access-count 0))))\n      (update :lru-order touch-way way-index)))\n\n(defn evict-and-insert\n  \"Evict LRU line and insert new one.\n   Returns [new-set evicted-line]\"\n  [cache-set new-line timestamp]\n  (let [victim-way (lru-victim (:lru-order cache-set))\n        evicted (get-in cache-set [:ways victim-way :line])\n        new-set (update-way cache-set victim-way new-line timestamp)]\n    [new-set evicted]))\n\n;; =============================================================================\n;; Main Access Function\n;; =============================================================================\n\n(defn access\n  \"Perform a cache access. Pure function.\n\n   Arguments:\n   - cache: current cache state\n   - address: memory address being accessed\n   - timestamp: current timestamp (for LRU tracking)\n   - opts: {:write? false, :data nil}\n\n   Returns:\n   {:cache new-cache-state\n    :result {:hit? bool\n             :level :l1/:l2/:l3\n             :set-index int\n             :way-index int (or nil for miss)\n             :evicted nil or {:address :data :dirty?}\n             :latency-cycles int}}\"\n  [cache address timestamp & [{:keys [write? data] :or {write? false}}]]\n  (let [{:keys [config sets]} cache\n        {:keys [set-index tag]} (address-parts address config)\n        cache-set (get sets set-index)\n        [way-index existing-line] (find-line-in-set cache-set tag)]\n\n    (if existing-line\n      ;; === HIT ===\n      (let [updated-line (cond-> existing-line\n                           write? (assoc :state :modified)\n                           data (assoc :data data))\n            new-set (update-way cache-set way-index updated-line timestamp)\n            new-cache (-> cache\n                          (assoc-in [:sets set-index] new-set)\n                          (update-in [:stats :hits] inc)\n                          (update-in [:stats (if write? :writes :reads)] inc))]\n        {:cache new-cache\n         :result {:hit? true\n                  :level (:level cache)\n                  :set-index set-index\n                  :way-index way-index\n                  :evicted nil\n                  :latency-cycles (case (:level cache)\n                                    :l1 4\n                                    :l2 12\n                                    :l3 36)}})\n\n      ;; === MISS ===\n      (let [new-line {:tag tag\n                      :data (or data (vec (repeat (:line-size config) 0)))\n                      :state (if write? :modified :exclusive)\n                      :last-access timestamp\n                      :access-count 1}\n            empty-way (find-empty-way cache-set)\n            [new-set evicted] (if empty-way\n                                [(update-way cache-set empty-way new-line timestamp) nil]\n                                (evict-and-insert cache-set new-line timestamp))\n            new-cache (-> cache\n                          (assoc-in [:sets set-index] new-set)\n                          (update-in [:stats :misses] inc)\n                          (update-in [:stats (if write? :writes :reads)] inc)\n                          (cond-> evicted (update-in [:stats :evictions] inc)))]\n        {:cache new-cache\n         :result {:hit? false\n                  :level (:level cache)\n                  :set-index set-index\n                  :way-index (or empty-way (lru-victim (:lru-order cache-set)))\n                  :evicted (when evicted\n                             {:address (bit-shift-left (:tag evicted)\n                                                       (+ (int (Math/ceil (/ (Math/log (:sets config)) (Math/log 2))))\n                                                          (int (Math/ceil (/ (Math/log (:line-size config)) (Math/log 2))))))\n                              :data (:data evicted)\n                              :dirty? (= :modified (:state evicted))})\n                  :latency-cycles (case (:level cache)\n                                    :l1 4\n                                    :l2 12\n                                    :l3 36)}}))))\n\n;; =============================================================================\n;; Cache Hierarchy\n;; =============================================================================\n\n(defn make-cache-hierarchy\n  \"Create a multi-level cache hierarchy.\n\n   Example config:\n   {:l1d {:size-kb 32 :associativity 8 :type :data}\n    :l1i {:size-kb 32 :associativity 8 :type :instruction}\n    :l2  {:size-kb 256 :associativity 4 :type :unified}\n    :l3  {:size-kb 8192 :associativity 16 :type :unified}}\"\n  [config]\n  {:l1d (when (:l1d config)\n          (make-cache (assoc (:l1d config) :level :l1)))\n   :l1i (when (:l1i config)\n          (make-cache (assoc (:l1i config) :level :l1)))\n   :l2 (when (:l2 config)\n         (make-cache (assoc (:l2 config) :level :l2)))\n   :l3 (when (:l3 config)\n         (make-cache (assoc (:l3 config) :level :l3)))})\n\n(defn hierarchy-access\n  \"Access through cache hierarchy.\n\n   Checks L1 -> L2 -> L3 -> RAM.\n   On miss, fills all levels.\n\n   Returns:\n   {:hierarchy new-hierarchy\n    :results [{:level :l1 :hit? true/false ...} ...]\n    :total-latency int\n    :final-level :l1/:l2/:l3/:ram}\"\n  [hierarchy address timestamp & [{:keys [write? instruction?] :as opts}]]\n  (let [l1-cache (if instruction? (:l1i hierarchy) (:l1d hierarchy))\n        levels (cond-> []\n                 l1-cache (conj [:l1 l1-cache (if instruction? :l1i :l1d)])\n                 (:l2 hierarchy) (conj [:l2 (:l2 hierarchy) :l2])\n                 (:l3 hierarchy) (conj [:l3 (:l3 hierarchy) :l3]))]\n\n    (loop [remaining levels\n           current-hierarchy hierarchy\n           results []\n           found-at nil]\n      (if (or (empty? remaining) found-at)\n        ;; Done - either found or checked all levels\n        (let [total-latency (+ (reduce + 0 (map :latency-cycles results))\n                               (if found-at 0 100))] ; 100 cycles for RAM\n          {:hierarchy current-hierarchy\n           :results results\n           :total-latency total-latency\n           :final-level (or found-at :ram)})\n\n        ;; Check next level\n        (let [[level cache key] (first remaining)\n              {:keys [cache result]} (access cache address timestamp opts)\n              new-hierarchy (assoc current-hierarchy key cache)\n              new-results (conj results result)]\n          (if (:hit? result)\n            ;; Hit - we're done\n            (recur [] new-hierarchy new-results level)\n            ;; Miss - continue to next level\n            (recur (rest remaining) new-hierarchy new-results nil)))))))\n\n;; =============================================================================\n;; Trace Replay\n;; =============================================================================\n\n(defn replay-accesses\n  \"Replay a sequence of memory accesses through cache hierarchy.\n\n   accesses: [{:address 0x... :timestamp 0 :write? false} ...]\n\n   Returns sequence of access results with running state.\"\n  [hierarchy accesses]\n  (reductions\n   (fn [{:keys [hierarchy]} {:keys [address timestamp] :as access-info}]\n     (let [result (hierarchy-access hierarchy address timestamp access-info)]\n       (assoc result :access access-info)))\n   {:hierarchy hierarchy :results [] :total-latency 0 :final-level nil}\n   accesses))\n\n(defn summarize-replay\n  \"Summarize results of replay-accesses\"\n  [replay-results]\n  (let [results (rest replay-results)] ; Skip initial state\n    {:total-accesses (count results)\n     :l1-hits (count (filter #(= :l1 (:final-level %)) results))\n     :l2-hits (count (filter #(= :l2 (:final-level %)) results))\n     :l3-hits (count (filter #(= :l3 (:final-level %)) results))\n     :ram-accesses (count (filter #(= :ram (:final-level %)) results))\n     :total-cycles (reduce + 0 (map :total-latency results))\n     :avg-latency (/ (reduce + 0.0 (map :total-latency results))\n                     (max 1 (count results)))}))\n\n;; =============================================================================\n;; REPL Exploration\n;; =============================================================================\n\n(comment\n  ;; Create a simple L1 cache\n  (def l1 (make-cache {:level :l1\n                       :type :data\n                       :size-kb 32\n                       :associativity 8}))\n\n  ;; Check structure\n  (:config l1)\n  (count (:sets l1))  ; Should be 64 sets for 32KB/8-way\n\n  ;; Do an access\n  (def result1 (access l1 0x7ff612340000 0))\n  (:result result1)  ; Should be miss\n\n  ;; Same address again\n  (def result2 (access (:cache result1) 0x7ff612340000 1))\n  (:result result2)  ; Should be hit!\n\n  ;; Different address, same set (test LRU)\n  (def addr-parts (address-parts 0x7ff612340000 (:config l1)))\n\n  ;; Create full hierarchy\n  (def hier (make-cache-hierarchy\n             {:l1d {:size-kb 32 :associativity 8 :type :data}\n              :l2 {:size-kb 256 :associativity 4 :type :unified}\n              :l3 {:size-kb 8192 :associativity 16 :type :unified}}))\n\n  ;; Access through hierarchy\n  (def h-result (hierarchy-access hier 0x7ff612340000 0))\n  (:final-level h-result)  ; :ram (first access)\n  (:total-latency h-result)\n\n  ;; Replay a sequence\n  (def accesses [{:address 0x1000 :timestamp 0}\n                 {:address 0x2000 :timestamp 1}\n                 {:address 0x1000 :timestamp 2}  ; Should hit L1\n                 {:address 0x1040 :timestamp 3}  ; Same line as 0x1000!\n                 {:address 0x3000 :timestamp 4}])\n\n  (def replay (replay-accesses hier accesses))\n  (summarize-replay replay)\n  )\n","~:reader-features",["^I",["~:cljs"]],"~:used-var-namespaces",["^I",["^K","^D","~$js","~$Math"]],"~:cljc",true,"~:source-map-compact",["^ ","mappings","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","names",["p__12153","map__12154","cljs.core/--destructure-map","cljs.core.get","observatory.cache/address-parts","address","sets","line-size","offset-bits","Math/ceil","Math/log","index-bits","offset-mask","index-mask","observatory.cache/line-address","observatory.cache/make-empty-way","index","observatory.cache/make-empty-set","associativity","cljs.core.mapv","cljs.core.range","cljs.core/vec","p__12158","map__12159","observatory.cache/make-cache","level","type","size-kb","config","size-bytes","lines","cljs.core/quot","cljs.core.assoc","p1__12157#","observatory.cache/touch-way","lru-order","way-index","filtered","p1__12161#","cljs.core/filterv","cljs.core.not_EQ_","cljs.core.conj","observatory.cache/lru-victim","cljs.core/first","observatory.cache/find-line-in-set","cache-set","tag","cljs.core.map_indexed","i","way","and__5000__auto__","cljs.core._EQ_","cljs.core.filter","cljs.core/some?","observatory.cache/find-empty-way","observatory.cache/update-way","line","timestamp","cljs.core/assoc-in","cljs.core.update","observatory.cache/evict-and-insert","new-line","victim-way","evicted","cljs.core.get_in","new-set","var_args","args__5732__auto__","len__5726__auto__","i__5727__auto__","argseq__5733__auto__","cljs.core/IndexedSeq","observatory.cache/access","p__12168","vec__12169","map__12172","cljs.core.nth","seq12162","G__12163","cljs.core/next","G__12164","G__12165","self__5711__auto__","cache","write?","data","map__12173","map__12174","vec__12175","set-index","existing-line","updated-line","G__12178","new-cache","cljs.core.update_in","cljs.core/inc","G__12181","cljs.core/Keyword","js/Error","vec__12198","or__5002__auto__","cljs.core.repeat","empty-way","G__12201","G__12209","observatory.cache/make-cache-hierarchy","observatory.cache/hierarchy-access","p__12226","vec__12227","map__12230","seq12217","G__12218","G__12219","G__12220","hierarchy","instruction?","opts","l1-cache","levels","G__12231","remaining","current-hierarchy","results","found-at","cljs.core/empty?","total-latency","cljs.core.reduce","cljs.core/+","cljs.core.map","vec__12240","map__12243","key","result","observatory.cache.access","new-hierarchy","new-results","cljs.core/rest","observatory.cache/replay-accesses","accesses","cljs.core.reductions","p__12250","p__12251","map__12252","map__12253","access-info","observatory.cache.hierarchy_access","observatory.cache/summarize-replay","replay-results","cljs.core/count","p1__12254#","p1__12255#","p1__12256#","p1__12257#","x__5087__auto__","y__5088__auto__"]],"~:used-vars",["^I",["~$cljs.core/--destructure-map","~$cljs.core/some?","~$cljs.core/rest","~$observatory.cache/make-cache-hierarchy","~$observatory.cache/address-parts","~$cljs.core/filter","~$cljs.core/=","~$observatory.cache/evict-and-insert","~$cljs.core/IndexedSeq","~$cljs.core/count","~$cljs.core/reduce","~$observatory.cache/line-address","~$cljs.core/Keyword","~$cljs.core/mapv","~$cljs.core/not=","~$cljs.core/quot","~$observatory.cache/make-cache","~$cljs.core/empty?","~$observatory.cache/access","~$cljs.core/conj","~$cljs.core/update","~$Math/ceil","~$cljs.core/map","~$observatory.cache/touch-way","~$observatory.cache/summarize-replay","~$cljs.core/filterv","~$cljs.core/get-in","~$observatory.cache/make-empty-set","~$observatory.cache/update-way","~$observatory.cache/replay-accesses","~$observatory.cache/find-empty-way","~$cljs.core/get","~$observatory.cache/lru-victim","~$cljs.core/nth","~$cljs.core/next","~$cljs.core/vec","~$cljs.core/reductions","~$observatory.cache/hierarchy-access","~$observatory.cache/find-line-in-set","~$cljs.core/assoc","~$cljs.core/assoc-in","~$cljs.core/map-indexed","~$cljs.core/range","~$Math/log","~$cljs.core/repeat","~$cljs.core/first","~$cljs.core/+","~$cljs.core/update-in","~$js/Error","~$observatory.cache/make-empty-way","~$cljs.core/inc"]]],"~:cache-keys",["~#cmap",[["^14","goog/dom/tagname.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","~:shadow.build.compiler/resolve",["^ ","~:require-id",null,"~:deps-ids",["^I",[]],"~:deps-syms",["^S","~$goog.dom.HtmlElement"]]],["^14","cljs/spec/gen/alpha.cljs"],["b89362aeac5c1cafea76c798929ee5d385c461d8","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S","^D","~$goog.Uri"]]],["^14","goog/html/trustedtypes.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S"]]],["^14","malli/registry.cljc"],["0a80e70a25d940ee0ae86ccbd6604d80245ae99b","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S","^D"]]],["^14","goog/labs/useragent/browser.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S","~$goog.labs.userAgent.util","~$goog.labs.userAgent.highEntropy.highEntropyValue","~$goog.asserts","~$goog.string.internal","~$goog.labs.userAgent.highEntropy.highEntropyData","~$goog.labs.userAgent"]]],["^14","goog/html/safeurl.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S","^2T","~$goog.fs.url","~$goog.html.TrustedResourceUrl","~$goog.string.Const","~$goog.string.TypedString","^2U"]]],["^14","goog/array/array.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S","^2T"]]],["^14","malli/generator.cljc"],["0a80e70a25d940ee0ae86ccbd6604d80245ae99b","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S","^D","^F","~$clojure.string","~$clojure.test.check","~$clojure.test.check.generators","~$clojure.test.check.properties","~$clojure.test.check.random","~$clojure.test.check.rose-tree","~$malli.core","~$malli.registry","~$malli.util","~$malli.impl.util"]]],["^14","clojure/test/check/properties.cljc"],["f33d988fd57bc9c11af1952db81c10f319c91416","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S","^D","^32","~$clojure.test.check.results"]]],["^14","clojure/test/check/generators.cljc"],["f33d988fd57bc9c11af1952db81c10f319c91416","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S","^D","^30","^34","^35","~$goog.string"]]],["^14","goog/debug/error.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S"]]],["^14","observatory/schema.cljc"],["1c1cdc4fad3efb524996b89a036aed64a44b9564","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S","^D","^36","^37","~$malli.generator"]]],["^14","goog/flags/flags.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S"]]],["^14","malli/util.cljc"],["0a80e70a25d940ee0ae86ccbd6604d80245ae99b","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S","^D","^D","^36"]]],["^14","clojure/test/check/random/doubles.cljs"],["f33d988fd57bc9c11af1952db81c10f319c91416","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S","^D","~$clojure.test.check.random.longs"]]],["^14","goog/dom/nodetype.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S"]]],["^14","goog/labs/useragent/highentropy/highentropyvalue.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S","^2R","^2U"]]],["^14","clojure/test/check/rose_tree.cljc"],["f33d988fd57bc9c11af1952db81c10f319c91416","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S","^D"]]],["^14","clojure/test/check/impl.cljc"],["f33d988fd57bc9c11af1952db81c10f319c91416","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S","^D"]]],["^14","clojure/test/check/random.cljs"],["f33d988fd57bc9c11af1952db81c10f319c91416","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S","^D","~$clojure.test.check.random.doubles","^3="]]],["^14","goog/string/typedstring.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S"]]],["^14","goog/object/object.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S"]]],["^14","goog/dom/asserts.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S","^2T"]]],"~:SHADOW-TIMESTAMP",[1767933961000,1767933961000,1765283148000],["^14","goog/math/long.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S","^2T","~$goog.reflect"]]],["^14","goog/html/trustedresourceurl.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S","^2T","~$goog.fs.blob","^2X","~$goog.html.SafeScript","~$goog.html.trustedtypes","^2Z","^2["]]],["^14","goog/string/internal.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S"]]],["^14","clojure/test/check.cljc"],["f33d988fd57bc9c11af1952db81c10f319c91416","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S","^D","^32","^34","^3:","^35","~$clojure.test.check.impl"]]],["^14","goog/functions/functions.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S"]]],["^14","goog/html/safestyle.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S","^2Z","~$goog.html.SafeUrl","^2[","^2T","^2U"]]],["^14","goog/dom/safe.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S","^2T","~$goog.asserts.dom","~$goog.dom.asserts","~$goog.functions","~$goog.html.SafeHtml","^3B","~$goog.html.SafeStyle","^3E","^2Y","~$goog.html.uncheckedconversions","^2Z","^2U"]]],["^14","goog/asserts/dom.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S","~$goog.dom.TagName","^2T","~$goog.dom.element"]]],["^14","goog/html/safehtml.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S","^2Z","^3B","^3J","~$goog.html.SafeStyleSheet","^3E","^3L","^2Y","^2[","^2T","~$goog.labs.userAgent.browser","~$goog.array","~$goog.object","^2U","~$goog.dom.tags","^3C"]]],["^14","goog/dom/tags.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S","^3Q"]]],["^14","goog/fs/blob.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S"]]],["^14","borkdude/dynaload.cljc"],["accd696ba364b850b4d92e38f5a34d0e828a0ad1","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S","^D"]]],["^14","goog/asserts/asserts.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S","~$goog.debug.Error","~$goog.dom.NodeType"]]],["^14","malli/sci.cljc"],["0a80e70a25d940ee0ae86ccbd6604d80245ae99b","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S","^D","~$borkdude.dynaload"]]],["^14","goog/uri/uri.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S","^3P","^2T","~$goog.collections.maps","^3;","~$goog.structs","~$goog.uri.utils","~$goog.uri.utils.ComponentIndex","~$goog.uri.utils.StandardQueryParam"]]],["^14","goog/labs/useragent/highentropy/highentropydata.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S","^2S"]]],["^14","goog/collections/maps.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S"]]],["^14","malli/impl/util.cljc"],["0a80e70a25d940ee0ae86ccbd6604d80245ae99b","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S","^D"]]],["^14","goog/fs/url.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S"]]],["^14","goog/base.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",[]]],["^14","goog/structs/structs.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S","^3P","^3Q"]]],["^14","observatory/cache.cljc"],["1353a29d159e18101a4a261e7cefe2b622906cfb","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S","^D","^Q"]]],["^14","clojure/string.cljs"],["b89362aeac5c1cafea76c798929ee5d385c461d8","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S","^D","^3;","~$goog.string.StringBuffer"]]],["^14","clojure/test/check/random/longs/bit_count_impl.cljs"],["f33d988fd57bc9c11af1952db81c10f319c91416","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S","^D"]]],["^14","malli/impl/regex.cljc"],["0a80e70a25d940ee0ae86ccbd6604d80245ae99b","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S","^D","^39"]]],["^14","goog/string/string.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S","~$goog.dom.safe","^3K","^2Z","^2U"]]],["^14","malli/core.cljc"],["0a80e70a25d940ee0ae86ccbd6604d80245ae99b","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S","^D","^D","~$malli.impl.regex","^39","^37","~$malli.sci"]]],["^14","goog/reflect/reflect.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S"]]],["^14","goog/labs/useragent/util.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S","^2U","^2W"]]],["^14","goog/string/stringbuffer.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S"]]],["^14","goog/labs/useragent/useragent.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S","~$goog.flags"]]],["^14","goog/dom/element.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S","^3T","^3L"]]],["^14","goog/html/uncheckedconversions.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S","^2T","^3I","^3B","^3J","^3N","^3E","^2Y","^2Z","^2U"]]],["^14","goog/dom/htmlelement.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S"]]],["^14","cljs/core.cljs"],["b89362aeac5c1cafea76c798929ee5d385c461d8","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S","~$goog.math.Long","~$goog.math.Integer","^3;","^3Q","^3P","^2Q","^3["]]],["^14","goog/html/safescript.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S","^2Z","^2[","^3C","^2T"]]],["^14","clojure/test/check/random/longs.cljs"],["f33d988fd57bc9c11af1952db81c10f319c91416","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S","^D","~$clojure.test.check.random.longs.bit-count-impl","^44","^D"]]],["^14","goog/html/safestylesheet.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S","^2Z","^3J","^2[","^3Q","^2T","^2U"]]],["^14","goog/math/integer.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S","^3@"]]],["^14","goog/uri/utils.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S","^2T","^3;"]]],["^14","goog/string/const.js"],["533ce2bdbb7925db781449abb6527af1e6c5e782","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S","^2T","^2["]]],["^14","clojure/test/check/results.cljc"],["f33d988fd57bc9c11af1952db81c10f319c91416","^2L",["^ ","^2M",null,"^2N",["^I",[]],"^2O",["^S","^D"]]]]],"~:clj-info",["^ ","jar:file:/home/hbtweb/.m2/repository/org/clojure/clojurescript/1.11.132/clojurescript-1.11.132.jar!/cljs/core.cljc",1765283148000,"jar:file:/home/hbtweb/.m2/repository/org/clojure/clojure/1.11.1/clojure-1.11.1.jar!/clojure/set.clj",1767756186000,"jar:file:/home/hbtweb/.m2/repository/org/clojure/clojurescript/1.11.132/clojurescript-1.11.132.jar!/cljs/externs.clj",1765283148000,"jar:file:/home/hbtweb/.m2/repository/org/clojure/test.check/1.1.1/test.check-1.1.1.jar!/clojure/test/check/results.cljc",1765283163000,"jar:file:/home/hbtweb/.m2/repository/org/clojure/clojurescript/1.11.132/clojurescript-1.11.132.jar!/cljs/tagged_literals.cljc",1765283148000,"jar:file:/home/hbtweb/.m2/repository/org/clojure/clojurescript/1.11.132/clojurescript-1.11.132.jar!/cljs/vendor/clojure/tools/reader/reader_types.clj",1765283148000,"jar:file:/home/hbtweb/.m2/repository/org/clojure/clojurescript/1.11.132/clojurescript-1.11.132.jar!/cljs/vendor/clojure/tools/reader/impl/errors.clj",1765283148000,"jar:file:/home/hbtweb/.m2/repository/org/clojure/clojurescript/1.11.132/clojurescript-1.11.132.jar!/cljs/spec/gen/alpha.cljc",1765283148000,"jar:file:/home/hbtweb/.m2/repository/org/clojure/clojure/1.11.1/clojure-1.11.1.jar!/clojure/instant.clj",1767756186000,"jar:file:/home/hbtweb/.m2/repository/org/clojure/test.check/1.1.1/test.check-1.1.1.jar!/clojure/test/check/generators.cljc",1765283163000,"jar:file:/home/hbtweb/.m2/repository/org/clojure/clojurescript/1.11.132/clojurescript-1.11.132.jar!/cljs/analyzer/passes.cljc",1765283148000,"jar:file:/home/hbtweb/.m2/repository/borkdude/dynaload/0.3.5/dynaload-0.3.5.jar!/borkdude/dynaload.cljc",1765283156000,"jar:file:/home/hbtweb/.m2/repository/org/clojure/clojurescript/1.11.132/clojurescript-1.11.132.jar!/cljs/env.cljc",1765283148000,"jar:file:/home/hbtweb/.m2/repository/org/clojure/test.check/1.1.1/test.check-1.1.1.jar!/clojure/test/check/random.clj",1765283163000,"jar:file:/home/hbtweb/.m2/repository/org/clojure/clojurescript/1.11.132/clojurescript-1.11.132.jar!/cljs/vendor/clojure/tools/reader.clj",1765283148000,"jar:file:/home/hbtweb/.m2/repository/org/clojure/test.check/1.1.1/test.check-1.1.1.jar!/clojure/test/check/properties.cljc",1765283163000,"jar:file:/home/hbtweb/.m2/repository/org/clojure/clojurescript/1.11.132/clojurescript-1.11.132.jar!/cljs/vendor/clojure/data/json.clj",1765283148000,"jar:file:/home/hbtweb/.m2/repository/org/clojure/clojure/1.11.1/clojure-1.11.1.jar!/clojure/core.clj",1767756186000,"jar:file:/home/hbtweb/.m2/repository/org/clojure/clojure/1.11.1/clojure-1.11.1.jar!/clojure/java/io.clj",1767756186000,"jar:file:/home/hbtweb/.m2/repository/org/clojure/clojure/1.11.1/clojure-1.11.1.jar!/clojure/pprint.clj",1767756186000,"jar:file:/home/hbtweb/.m2/repository/org/clojure/clojurescript/1.11.132/clojurescript-1.11.132.jar!/cljs/util.cljc",1765283148000,"jar:file:/home/hbtweb/.m2/repository/org/clojure/clojurescript/1.11.132/clojurescript-1.11.132.jar!/cljs/vendor/clojure/tools/reader/default_data_readers.clj",1765283148000,"jar:file:/home/hbtweb/.m2/repository/metosin/malli/0.16.4/malli-0.16.4.jar!/malli/core.cljc",1768319474000,"jar:file:/home/hbtweb/.m2/repository/metosin/malli/0.16.4/malli-0.16.4.jar!/malli/sci.cljc",1768319474000,"jar:file:/home/hbtweb/.m2/repository/org/clojure/clojurescript/1.11.132/clojurescript-1.11.132.jar!/cljs/vendor/clojure/tools/reader/impl/inspect.clj",1765283148000,"jar:file:/home/hbtweb/.m2/repository/org/clojure/clojurescript/1.11.132/clojurescript-1.11.132.jar!/cljs/analyzer/impl.cljc",1765283148000,"jar:file:/home/hbtweb/.m2/repository/org/clojure/clojurescript/1.11.132/clojurescript-1.11.132.jar!/cljs/source_map/base64_vlq.clj",1765283148000,"jar:file:/home/hbtweb/.m2/repository/org/clojure/clojurescript/1.11.132/clojurescript-1.11.132.jar!/cljs/compiler.cljc",1765283148000,"jar:file:/home/hbtweb/.m2/repository/org/clojure/clojure/1.11.1/clojure-1.11.1.jar!/clojure/edn.clj",1767756186000,"jar:file:/home/hbtweb/.m2/repository/metosin/malli/0.16.4/malli-0.16.4.jar!/malli/impl/util.cljc",1768319474000,"jar:file:/home/hbtweb/.m2/repository/metosin/malli/0.16.4/malli-0.16.4.jar!/malli/registry.cljc",1768319474000,"jar:file:/home/hbtweb/.m2/repository/org/clojure/test.check/1.1.1/test.check-1.1.1.jar!/clojure/test/check/rose_tree.cljc",1765283163000,"jar:file:/home/hbtweb/.m2/repository/org/clojure/clojure/1.11.1/clojure-1.11.1.jar!/clojure/string.clj",1767756186000,"jar:file:/home/hbtweb/.m2/repository/org/clojure/clojurescript/1.11.132/clojurescript-1.11.132.jar!/cljs/analyzer.cljc",1765283148000,"jar:file:/home/hbtweb/.m2/repository/org/clojure/clojurescript/1.11.132/clojurescript-1.11.132.jar!/cljs/analyzer/impl/namespaces.cljc",1765283148000,"jar:file:/home/hbtweb/.m2/repository/org/clojure/clojurescript/1.11.132/clojurescript-1.11.132.jar!/cljs/js_deps.cljc",1765283148000,"jar:file:/home/hbtweb/.m2/repository/org/clojure/clojurescript/1.11.132/clojurescript-1.11.132.jar!/cljs/instant.clj",1765283148000,"jar:file:/home/hbtweb/.m2/repository/org/clojure/clojurescript/1.11.132/clojurescript-1.11.132.jar!/cljs/source_map.clj",1765283148000,"jar:file:/home/hbtweb/.m2/repository/metosin/malli/0.16.4/malli-0.16.4.jar!/malli/impl/regex.cljc",1768319474000,"jar:file:/home/hbtweb/.m2/repository/org/clojure/clojurescript/1.11.132/clojurescript-1.11.132.jar!/cljs/analyzer/passes/and_or.cljc",1765283148000,"jar:file:/home/hbtweb/.m2/repository/org/clojure/clojure/1.11.1/clojure-1.11.1.jar!/clojure/walk.clj",1767756186000,"jar:file:/home/hbtweb/.m2/repository/org/clojure/clojurescript/1.11.132/clojurescript-1.11.132.jar!/cljs/source_map/base64.clj",1765283148000],"~:analyzer",["^ ","^3",null,"^4",["^ "],"^5",["^ ","^6","Pure functional cache simulator.\n\n   Models set-associative caches with LRU replacement.\n   All functions are pure - take state, return new state.\n\n   Design:\n   - Cache state is a plain map\n   - Access returns [new-state result]\n   - Can step through access-by-access\n   - Can replay any sequence of accesses","^7","observatory/cache.cljc","^8",1,"^9",5,"^:",1,"^;",22],"^<",["^ ","^=","^>","^?","^@","^A","^B","^C","^D","^E","^F"],"^G",null,"^H",["^I",[]],"^J","^K","^L",["^ "],"^O",null,"^P",["^ ","^Q","^Q","^R","^Q","^D","^D","^S","^S"],"^T",["^I",["^U"]],"~:shadow/js-access-global",["^I",["Error"]],"^V",null,"~:defs",["^ ","~$summarize-replay",["^ ","~:protocol-inline",null,"^5",["^ ","^7","observatory/cache.cljc","^8",308,"^9",7,"^:",308,"^;",23,"~:arglists",["^Y",["~$quote",["^Y",[["~$replay-results"]]]]],"^6","Summarize results of replay-accesses"],"^J","^1[","^7","observatory/cache.cljc","^;",23,"~:method-params",["^Y",[["^5="]]],"~:protocol-impl",null,"~:arglists-meta",["^Y",[null,null]],"^9",1,"~:variadic?",false,"^8",308,"~:ret-tag","~$cljs.core/IMap","^:",308,"~:max-fixed-arity",1,"~:fn-var",true,"^5;",["^Y",["^5<",["^Y",[["^5="]]]]],"^6","Summarize results of replay-accesses"],"~$lru-victim",["^ ","^5:",null,"^5",["^ ","^7","observatory/cache.cljc","^8",99,"^9",7,"^:",99,"^;",17,"^5;",["^Y",["^5<",["^Y",[["~$lru-order"]]]]],"^6","Get the LRU way index (first in order)"],"^J","^27","^7","observatory/cache.cljc","^;",17,"^5>",["^Y",[["^5G"]]],"^5?",null,"^5@",["^Y",[null,null]],"^9",1,"^5A",false,"^8",99,"^5B",["^I",["~$any","~$clj-nil"]],"^:",99,"^5D",1,"^5E",true,"^5;",["^Y",["^5<",["^Y",[["^5G"]]]]],"^6","Get the LRU way index (first in order)"],"~$update-way",["^ ","^5:",null,"^5",["^ ","^7","observatory/cache.cljc","^8",128,"^9",7,"^:",128,"^;",17,"^5;",["^Y",["^5<",["^Y",[["~$cache-set","~$way-index","~$line","~$timestamp"]]]]],"^6","Update a specific way in a set with a new line"],"^J","^23","^7","observatory/cache.cljc","^;",17,"^5>",["^Y",[["^5K","^5L","^5M","^5N"]]],"^5?",null,"^5@",["^Y",[null,null]],"^9",1,"^5A",false,"^8",128,"^5B",["^I",["~$clj","^5H"]],"^:",128,"^5D",4,"^5E",true,"^5;",["^Y",["^5<",["^Y",[["^5K","^5L","^5M","^5N"]]]]],"^6","Update a specific way in a set with a new line"],"~$replay-accesses",["^ ","^5:",null,"^5",["^ ","^7","observatory/cache.cljc","^8",294,"^9",7,"^:",294,"^;",22,"^5;",["^Y",["^5<",["^Y",[["~$hierarchy","~$accesses"]]]]],"^6","Replay a sequence of memory accesses through cache hierarchy.\n\n   accesses: [{:address 0x... :timestamp 0 :write? false} ...]\n\n   Returns sequence of access results with running state."],"^J","^24","^7","observatory/cache.cljc","^;",22,"^5>",["^Y",[["^5Q","^5R"]]],"^5?",null,"^5@",["^Y",[null,null]],"^9",1,"^5A",false,"^8",294,"^5B","^5O","^:",294,"^5D",2,"^5E",true,"^5;",["^Y",["^5<",["^Y",[["^5Q","^5R"]]]]],"^6","Replay a sequence of memory accesses through cache hierarchy.\n\n   accesses: [{:address 0x... :timestamp 0 :write? false} ...]\n\n   Returns sequence of access results with running state."],"~$find-empty-way",["^ ","^5:",null,"^5",["^ ","^7","observatory/cache.cljc","^8",120,"^9",7,"^:",120,"^;",21,"^5;",["^Y",["^5<",["^Y",[["^5K"]]]]],"^6","Find an empty way in a set. Returns way-index or nil."],"^J","^25","^7","observatory/cache.cljc","^;",21,"^5>",["^Y",[["^5K"]]],"^5?",null,"^5@",["^Y",[null,null]],"^9",1,"^5A",false,"^8",120,"^5B",["^I",["^5H","^5I"]],"^:",120,"^5D",1,"^5E",true,"^5;",["^Y",["^5<",["^Y",[["^5K"]]]]],"^6","Find an empty way in a set. Returns way-index or nil."],"~$hierarchy-access",["^ ","^5:",null,"^5",["^ ","^7","observatory/cache.cljc","^8",248,"^9",7,"^:",248,"^;",23,"^5;",["^Y",["^5<",["^Y",[["^5Q","~$address","^5N","~$&",[["^ ","~:keys",["~$write?","~$instruction?"],"^[","~$opts"]]]]]]],"^6","Access through cache hierarchy.\n\n   Checks L1 -> L2 -> L3 -> RAM.\n   On miss, fills all levels.\n\n   Returns:\n   {:hierarchy new-hierarchy\n    :results [{:level :l1 :hit? true/false ...} ...]\n    :total-latency int\n    :final-level :l1/:l2/:l3/:ram}","~:top-fn",["^ ","^5A",true,"~:fixed-arity",3,"^5D",3,"^5>",[["^Y",["^5Q","^5U","^5N",[["^ ","^5V",["^5W","^5X"],"^[","^5Y"]]]]],"^5;",["^Y",[["^5Q","^5U","^5N","~$&",[["^ ","^5V",["^5W","^5X"],"^[","^5Y"]]]]],"^5@",["^Y",[null]]]],"^J","^2<","^7","observatory/cache.cljc","^;",23,"^5Z",["^ ","^5A",true,"^5[",3,"^5D",3,"^5>",[["^Y",["^5Q","^5U","^5N",[["^ ","^5V",["^5W","^5X"],"^[","^5Y"]]]]],"^5;",["^Y",[["^5Q","^5U","^5N","~$&",[["^ ","^5V",["^5W","^5X"],"^[","^5Y"]]]]],"^5@",["^Y",[null]]],"^5>",[["^Y",["^5Q","^5U","^5N",[["^ ","^5V",["^5W","^5X"],"^[","^5Y"]]]]],"^5?",null,"^5[",3,"^5@",["^Y",[null]],"^9",1,"^5A",true,"~:methods",[["^ ","^5[",3,"^5A",true,"~:tag","^5C"]],"^8",248,"^5B","^5H","^:",248,"^5D",3,"^5E",true,"^5;",["^Y",[["^5Q","^5U","^5N","~$&",[["^ ","^5V",["^5W","^5X"],"^[","^5Y"]]]]],"^6","Access through cache hierarchy.\n\n   Checks L1 -> L2 -> L3 -> RAM.\n   On miss, fills all levels.\n\n   Returns:\n   {:hierarchy new-hierarchy\n    :results [{:level :l1 :hit? true/false ...} ...]\n    :total-latency int\n    :final-level :l1/:l2/:l3/:ram}"],"~$find-line-in-set",["^ ","^5:",null,"^5",["^ ","^7","observatory/cache.cljc","^8",108,"^9",7,"^:",108,"^;",23,"^5;",["^Y",["^5<",["^Y",[["^5K","~$tag"]]]]],"^6","Find a cache line by tag in a set.\n   Returns [way-index line] or nil."],"^J","^2=","^7","observatory/cache.cljc","^;",23,"^5>",["^Y",[["^5K","^63"]]],"^5?",null,"^5@",["^Y",[null,null]],"^9",1,"^5A",false,"^8",108,"^5B",["^I",["^5H","^5I"]],"^:",108,"^5D",2,"^5E",true,"^5;",["^Y",["^5<",["^Y",[["^5K","^63"]]]]],"^6","Find a cache line by tag in a set.\n   Returns [way-index line] or nil."],"~$make-empty-way",["^ ","^5:",null,"^5",["^ ","^7","observatory/cache.cljc","^8",51,"^9",7,"^:",51,"^;",21,"^5;",["^Y",["^5<",["^Y",[["~$index"]]]]],"^6","Create an empty cache way"],"^J","^2H","^7","observatory/cache.cljc","^;",21,"^5>",["^Y",[["^65"]]],"^5?",null,"^5@",["^Y",[null,null]],"^9",1,"^5A",false,"^8",51,"^5B","^5C","^:",51,"^5D",1,"^5E",true,"^5;",["^Y",["^5<",["^Y",[["^65"]]]]],"^6","Create an empty cache way"],"~$make-cache-hierarchy",["^ ","^5:",null,"^5",["^ ","^7","observatory/cache.cljc","^8",230,"^9",7,"^:",230,"^;",27,"^5;",["^Y",["^5<",["^Y",[["~$config"]]]]],"^6","Create a multi-level cache hierarchy.\n\n   Example config:\n   {:l1d {:size-kb 32 :associativity 8 :type :data}\n    :l1i {:size-kb 32 :associativity 8 :type :instruction}\n    :l2  {:size-kb 256 :associativity 4 :type :unified}\n    :l3  {:size-kb 8192 :associativity 16 :type :unified}}"],"^J","^1F","^7","observatory/cache.cljc","^;",27,"^5>",["^Y",[["^67"]]],"^5?",null,"^5@",["^Y",[null,null]],"^9",1,"^5A",false,"^8",230,"^5B","^5C","^:",230,"^5D",1,"^5E",true,"^5;",["^Y",["^5<",["^Y",[["^67"]]]]],"^6","Create a multi-level cache hierarchy.\n\n   Example config:\n   {:l1d {:size-kb 32 :associativity 8 :type :data}\n    :l1i {:size-kb 32 :associativity 8 :type :instruction}\n    :l2  {:size-kb 256 :associativity 4 :type :unified}\n    :l3  {:size-kb 8192 :associativity 16 :type :unified}}"],"~$line-address",["^ ","^5:",null,"^5",["^ ","^7","observatory/cache.cljc","^8",41,"^9",7,"^:",41,"^;",19,"^5;",["^Y",["^5<",["^Y",[["^5U","~$line-size"]]]]],"^6","Get the cache-line-aligned address (clear offset bits)"],"^J","^1N","^7","observatory/cache.cljc","^;",19,"^5>",["^Y",[["^5U","^69"]]],"^5?",null,"^5@",["^Y",[null,null]],"^9",1,"^5A",false,"^8",41,"^5B","~$number","^:",41,"^5D",2,"^5E",true,"^5;",["^Y",["^5<",["^Y",[["^5U","^69"]]]]],"^6","Get the cache-line-aligned address (clear offset bits)"],"~$address-parts",["^ ","^5:",null,"^5",["^ ","^7","observatory/cache.cljc","^8",18,"^9",7,"^:",18,"^;",20,"^5;",["^Y",["^5<",["^Y",[["^5U",["^ ","^5V",["~$sets","^69"]]]]]]],"^6","Decompose address into tag, set index, and offset.\n\n   For a cache with S sets and B byte lines:\n   - Offset bits: log2(B) - identifies byte within line\n   - Index bits: log2(S) - identifies which set\n   - Tag bits: remaining high bits - identifies which line\n\n   Example for 32KB, 8-way, 64B lines:\n   - 32KB / 8 ways = 4KB per way\n   - 4KB / 64B = 64 sets\n   - Offset: 6 bits (64 bytes)\n   - Index: 6 bits (64 sets)\n   - Tag: 52 bits"],"^J","^1G","^7","observatory/cache.cljc","^;",20,"^5>",["^Y",[["^5U","~$p__12153"]]],"^5?",null,"^5@",["^Y",[null,null]],"^9",1,"^5A",false,"^8",18,"^5B","^5C","^:",18,"^5D",2,"^5E",true,"^5;",["^Y",["^5<",["^Y",[["^5U",["^ ","^5V",["^6<","^69"]]]]]]],"^6","Decompose address into tag, set index, and offset.\n\n   For a cache with S sets and B byte lines:\n   - Offset bits: log2(B) - identifies byte within line\n   - Index bits: log2(S) - identifies which set\n   - Tag bits: remaining high bits - identifies which line\n\n   Example for 32KB, 8-way, 64B lines:\n   - 32KB / 8 ways = 4KB per way\n   - 4KB / 64B = 64 sets\n   - Offset: 6 bits (64 bytes)\n   - Index: 6 bits (64 sets)\n   - Tag: 52 bits"],"~$evict-and-insert",["^ ","^5:",null,"^5",["^ ","^7","observatory/cache.cljc","^8",138,"^9",7,"^:",138,"^;",23,"^5;",["^Y",["^5<",["^Y",[["^5K","~$new-line","^5N"]]]]],"^6","Evict LRU line and insert new one.\n   Returns [new-set evicted-line]"],"^J","^1J","^7","observatory/cache.cljc","^;",23,"^5>",["^Y",[["^5K","^6?","^5N"]]],"^5?",null,"^5@",["^Y",[null,null]],"^9",1,"^5A",false,"^8",138,"^5B","~$cljs.core/IVector","^:",138,"^5D",3,"^5E",true,"^5;",["^Y",["^5<",["^Y",[["^5K","^6?","^5N"]]]]],"^6","Evict LRU line and insert new one.\n   Returns [new-set evicted-line]"],"~$make-cache",["^ ","^5:",null,"^5",["^ ","^7","observatory/cache.cljc","^8",64,"^9",7,"^:",64,"^;",17,"^5;",["^Y",["^5<",["^Y",[[["^ ","^5V",["~$level","~$type","~$size-kb","^69","~$associativity"],"^[","^67","~:or",["^ ","^69",64]]]]]]],"^6","Create a new empty cache from config.\n\n   Config should have:\n   - :level (:l1, :l2, :l3)\n   - :type (:data, :instruction, :unified)\n   - :size-kb\n   - :line-size (default 64)\n   - :associativity"],"^J","^1S","^7","observatory/cache.cljc","^;",17,"^5>",["^Y",[["~$p__12158"]]],"^5?",null,"^5@",["^Y",[null,null]],"^9",1,"^5A",false,"^8",64,"^5B","^5C","^:",64,"^5D",1,"^5E",true,"^5;",["^Y",["^5<",["^Y",[[["^ ","^5V",["^6B","^6C","^6D","^69","^6E"],"^[","^67","^6F",["^ ","^69",64]]]]]]],"^6","Create a new empty cache from config.\n\n   Config should have:\n   - :level (:l1, :l2, :l3)\n   - :type (:data, :instruction, :unified)\n   - :size-kb\n   - :line-size (default 64)\n   - :associativity"],"~$touch-way",["^ ","^5:",null,"^5",["^ ","^7","observatory/cache.cljc","^8",92,"^9",7,"^:",92,"^;",16,"^5;",["^Y",["^5<",["^Y",[["^5G","^5L"]]]]],"^6","Move a way to MRU position (end of LRU order).\n   Returns updated lru-order vector."],"^J","^1Z","^7","observatory/cache.cljc","^;",16,"^5>",["^Y",[["^5G","^5L"]]],"^5?",null,"^5@",["^Y",[null,null]],"^9",1,"^5A",false,"^8",92,"^5B","^5O","^:",92,"^5D",2,"^5E",true,"^5;",["^Y",["^5<",["^Y",[["^5G","^5L"]]]]],"^6","Move a way to MRU position (end of LRU order).\n   Returns updated lru-order vector."],"~$make-empty-set",["^ ","^5:",null,"^5",["^ ","^7","observatory/cache.cljc","^8",57,"^9",7,"^:",57,"^;",21,"^5;",["^Y",["^5<",["^Y",[["^65","^6E"]]]]],"^6","Create an empty cache set with N ways"],"^J","^22","^7","observatory/cache.cljc","^;",21,"^5>",["^Y",[["^65","^6E"]]],"^5?",null,"^5@",["^Y",[null,null]],"^9",1,"^5A",false,"^8",57,"^5B","^5C","^:",57,"^5D",2,"^5E",true,"^5;",["^Y",["^5<",["^Y",[["^65","^6E"]]]]],"^6","Create an empty cache set with N ways"],"~$access",["^ ","^5:",null,"^5",["^ ","^7","observatory/cache.cljc","^8",151,"^9",7,"^:",151,"^;",13,"^5;",["^Y",["^5<",["^Y",[["~$cache","^5U","^5N","~$&",[["^ ","^5V",["^5W","~$data"],"^6F",["^ ","^5W",false]]]]]]]],"^6","Perform a cache access. Pure function.\n\n   Arguments:\n   - cache: current cache state\n   - address: memory address being accessed\n   - timestamp: current timestamp (for LRU tracking)\n   - opts: {:write? false, :data nil}\n\n   Returns:\n   {:cache new-cache-state\n    :result {:hit? bool\n             :level :l1/:l2/:l3\n             :set-index int\n             :way-index int (or nil for miss)\n             :evicted nil or {:address :data :dirty?}\n             :latency-cycles int}}","^5Z",["^ ","^5A",true,"^5[",3,"^5D",3,"^5>",[["^Y",["^6K","^5U","^5N",[["^ ","^5V",["^5W","^6L"],"^6F",["^ ","^5W",false]]]]]],"^5;",["^Y",[["^6K","^5U","^5N","~$&",[["^ ","^5V",["^5W","^6L"],"^6F",["^ ","^5W",false]]]]]],"^5@",["^Y",[null]]]],"^J","^1U","^7","observatory/cache.cljc","^;",13,"^5Z",["^ ","^5A",true,"^5[",3,"^5D",3,"^5>",[["^Y",["^6K","^5U","^5N",[["^ ","^5V",["^5W","^6L"],"^6F",["^ ","^5W",false]]]]]],"^5;",["^Y",[["^6K","^5U","^5N","~$&",[["^ ","^5V",["^5W","^6L"],"^6F",["^ ","^5W",false]]]]]],"^5@",["^Y",[null]]],"^5>",[["^Y",["^6K","^5U","^5N",[["^ ","^5V",["^5W","^6L"],"^6F",["^ ","^5W",false]]]]]],"^5?",null,"^5[",3,"^5@",["^Y",[null]],"^9",1,"^5A",true,"^60",[["^ ","^5[",3,"^5A",true,"^61","^5C"]],"^8",151,"^5B","^5H","^:",151,"^5D",3,"^5E",true,"^5;",["^Y",[["^6K","^5U","^5N","~$&",[["^ ","^5V",["^5W","^6L"],"^6F",["^ ","^5W",false]]]]]],"^6","Perform a cache access. Pure function.\n\n   Arguments:\n   - cache: current cache state\n   - address: memory address being accessed\n   - timestamp: current timestamp (for LRU tracking)\n   - opts: {:write? false, :data nil}\n\n   Returns:\n   {:cache new-cache-state\n    :result {:hit? bool\n             :level :l1/:l2/:l3\n             :set-index int\n             :way-index int (or nil for miss)\n             :evicted nil or {:address :data :dirty?}\n             :latency-cycles int}}"]],"^W",["^ ","^D","^D"],"~:cljs.analyzer/constants",["^ ","^T",["^I",["~:lru-order","~:exclusive","~:address","~:total-cycles","~:l1","~:final-level","~:writes","~:index","~:offset","~:config","~:total-accesses","~:evictions","~:avg-latency","~:set-index","~:line-size","~:size-kb","~:dirty?","~:l1i","~:total-latency","~:type","~:last-access","~:state","~:latency-cycles","~:hit?","~:ram","~:modified","~:hits","~:l1-hits","~:write?","~:level","~:l1d","~:associativity","~:cache","~:l2-hits","~:ways","^8","~:evicted","~:result","~:l3-hits","~:l2","~:access-count","~:l3","~:access","^61","~:ram-accesses","~:hierarchy","~:timestamp","~:instruction?","~:stats","~:misses","~:sets","~:reads","~:data","~:way-index","~:results"]],"~:order",["^7R","^70","^6V","^6[","^61","^6U","^8","^7D","^6N","^7?","^75","^71","^7A","^6W","^7P","^7<","^7Q","^6Y","^7S","^6T","^76","^7I","^7>","^7T","^77","^7;","^7B","^7F","^79","^7U","^7E","^78","^6O","^6P","^72","^7@","^73","^7H","^7J","^6R","^7O","^7M","^7V","^74","^6S","^7:","^7N","^7K","^6X","^7=","^7C","^7G","^7L","^6Q","^6Z"]],"^10",["^ ","^U",["^I",[]]],"^11",[],"^12",["^S","^D","^Q"]],"^N","^K","~:ns-specs",["^ "],"~:ns-spec-vars",["^I",[]],"~:compiler-options",["^2K",[["^7Z","~:static-fns"],true,["~:js-options","~:use-babel"],null,["^7Z","~:shadow-tweaks"],null,["^7Z","~:source-map-inline"],null,["^7Z","~:shadow-optimize-constants"],null,["^7Z","~:elide-asserts"],false,["^7Z","~:optimize-constants"],null,["^7Z","^17"],null,["^7Z","~:external-config"],null,["^7Z","~:tooling-config"],null,["^7Z","~:emit-constants"],null,["^7Z","~:load-tests"],null,["^7Z","~:form-size-threshold"],null,["^7Z","~:global-goog-object&array"],null,["^7Z","~:data-readers"],null,["~:shadow.build/config","~:target"],"~:browser",["^7Z","~:infer-externs"],"~:auto",["^7Z","^19"],null,["^80","~:js-provider"],"~:shadow",["~:mode"],"~:dev",["^7Z","~:fn-invoke-direct"],null,["^7Z","~:source-map"],true]]]